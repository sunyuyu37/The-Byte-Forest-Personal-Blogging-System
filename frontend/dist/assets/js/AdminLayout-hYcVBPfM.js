import{_ as Tt,u as Rt,r as f,i as zt,m as $t,aD as Bt,D as St,q as Dt,c as p,a as It,ax as st,au as F,U as S,af as V,aE as at,W as nt,B as it,aF as q,o as Lt,b as v,M as Ft,e as s,w as a,k as Vt,f as qt,l as c,d as e,n as Ut,h as l,Z as U,I as C,K as T,H as u,a9 as Ht,J as H,ae as Pt,aG as ot,aH as Qt,ag as x,P as jt,s as Gt,az as Jt,aI as Ot,aJ as P,j as Wt,G as E,N as lt,O as dt,aj as Zt,R as Xt,aK as Yt,aL as Kt,F as te,V as ee,aw as se,aM as ae,aN as ne,T as ie,L as m,aO as oe,ay as le,aP as de}from"./index-Da7ZqcH5.js";/* empty css                  *//* empty css                     */import{E as ce}from"./scrollbar-PN-ehNXN.js";import"./tooltip-l0sNRNKZ.js";import{E as ue,a as re,b as me,c as _e,s as ve}from"./positionedConfirm-C6ixQw3s.js";import{g as fe,a as pe,m as ge,c as he,b as ke}from"./notification-7HEdQPIl.js";import{E as be,b as we,a as ye,d as Ce,e as xe}from"./index-R92uOlC6.js";import"./vnode-DsZHVpXe.js";import"./index-mDFjMy5P.js";import"./castArray-DVWVVBpp.js";import"./isEqual-HUGtL056.js";import"./_Uint8Array-CNK7Frb1.js";import"./index-k6BulDX8.js";import"./index-lPpvXrw4.js";import"./index-CZyikzse.js";import"./index-ViZWhRvA.js";import"./index-BJ8ssZSI.js";import"./index-Chbwi6h6.js";import"./index-BwTCsBpr.js";import"./index-Ddj3Fd5B.js";import"./index-DuvIoQvO.js";import"./index-DSEo_ZHY.js";import"./index-BLAWzDFp.js";import"./directive-iqmOBkSf.js";const Ee={class:"admin-layout"},Ae={class:"sidebar"},Me={class:"logo"},Ne={class:"logo-container"},Te={class:"logo-icon"},Re={class:"icon-wrapper"},ze={class:"menu-section"},$e={class:"menu-item-content"},Be={class:"menu-icon"},Se={class:"menu-item-content"},De={class:"menu-icon"},Ie={class:"menu-item-content"},Le={class:"menu-icon"},Fe={class:"menu-item-content"},Ve={class:"menu-icon"},qe={class:"menu-item-content"},Ue={class:"menu-icon"},He={class:"menu-item-content"},Pe={class:"menu-icon"},Qe={class:"menu-item-content"},je={class:"menu-icon"},Ge={class:"menu-section"},Je={class:"menu-item-content"},Oe={class:"menu-icon"},We={class:"header"},Ze={class:"header-content"},Xe={class:"header-left"},Ye={class:"page-title-section"},Ke={class:"title-wrapper"},ts={class:"title-icon"},es={class:"title-content"},ss={class:"page-title"},as={class:"page-subtitle"},ns={class:"quick-actions"},is={class:"header-right"},os={class:"header-actions"},ls={class:"search-container"},ds={class:"system-status"},cs={class:"action-btn notification-btn"},us={class:"notification-panel"},rs={class:"notification-header"},ms={class:"header-actions"},_s={class:"notification-tabs"},vs={key:0,class:"notification-list"},fs=["onClick"],ps={class:"notification-content"},gs={class:"notification-title"},hs={class:"notification-desc"},ks={class:"notification-time"},bs={key:0,class:"notification-actions"},ws={key:1,class:"notification-empty"},ys={class:"notification-footer"},Cs={class:"action-btn theme-btn"},xs={class:"theme-panel"},Es={class:"theme-list"},As=["onClick"],Ms={class:"theme-icon"},Ns={class:"theme-info"},Ts={class:"theme-name"},Rs={class:"theme-desc"},zs={key:0,class:"theme-check"},$s={class:"user-profile"},Bs={class:"user-avatar-container"},Ss={class:"user-info"},Ds={class:"user-name"},Is={class:"dropdown-header"},Ls={class:"user-card"},Fs={class:"user-details"},Vs={class:"dropdown-menu"},qs={class:"main-content"},Us={__name:"AdminLayout",setup(Hs){const A=It(),_=Vt(),g=Rt(),ct=n=>n.name==="CreateArticle"||n.name==="EditArticle"?"slide-left":n.name==="AdminStatistics"||n.name==="TokenStatus"?"zoom-fade":n.name==="AccountSettings"||n.name==="SecurityCenter"||n.name==="HelpCenter"?"fade-slide":"slide-up",Q=f(""),D=f(!1),h=f("light"),R=f([{key:"light",name:"浅色主题",description:"经典的浅色界面，适合日间使用",icon:zt,preview:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)"},{key:"dark",name:"深色主题",description:"护眼的深色界面，适合夜间使用",icon:$t,preview:"linear-gradient(135deg, #1e293b 0%, #334155 100%)"},{key:"warm",name:"暖色主题",description:"温暖的橙色调，营造舒适氛围",icon:Bt,preview:"linear-gradient(135deg, #fed7aa 0%, #fb923c 100%)"},{key:"ocean",name:"海洋主题",description:"清新的蓝色调，带来宁静感受",icon:St,preview:"linear-gradient(135deg, #bfdbfe 0%, #3b82f6 100%)"},{key:"auto",name:"跟随系统",description:"自动跟随系统主题设置",icon:Dt,preview:"linear-gradient(135deg, #f8fafc 0%, #1e293b 100%)"}]),ut=p(()=>R.value.find(n=>n.key===h.value)||R.value[0]),k=f("all"),b=f([]),j=f(!1),w=f(0),z=p(()=>w.value),G=p(()=>k.value==="unread"?b.value.filter(n=>!n.isRead):b.value),J=p(()=>A.path),rt=p(()=>{const n=A.path;return{"/admin":"仪表盘","/admin/articles":"文章管理","/admin/categories":"分类管理","/admin/tags":"标签管理","/admin/comments":"评论管理","/admin/users":"用户管理","/admin/statistics":"数据统计","/admin/token-status":"Token监控"}[n]||"管理后台"}),mt=p(()=>{const n=A.path;return{"/admin":"欢迎回来，查看您的网站概况","/admin/articles":"管理您的所有文章内容","/admin/categories":"组织和管理文章分类","/admin/tags":"管理文章标签系统","/admin/comments":"审核和管理用户评论","/admin/users":"管理注册用户信息","/admin/statistics":"查看博客数据分析与可视化","/admin/token-status":"监控系统Token状态"}[n]||"管理后台控制面板"}),_t=p(()=>{const n=A.path;return{"/admin":q,"/admin/articles":it,"/admin/categories":nt,"/admin/tags":at,"/admin/comments":V,"/admin/users":S,"/admin/statistics":F,"/admin/token-status":st}[n]||q}),O=p(()=>{const n=A.path;return{"/admin":"","/admin/articles":"文章管理","/admin/categories":"分类管理","/admin/tags":"标签管理","/admin/comments":"评论管理","/admin/users":"用户管理","/admin/statistics":"数据统计","/admin/token-status":"Token监控"}[n]||""}),vt=n=>({comment:V,system:U,user:S,success:de,warning:le,info:oe})[n]||P,W=async n=>{try{await ke(n.id),n.isRead=!0,w.value=Math.max(0,w.value-1),m.success("已标记为已读")}catch(t){console.error("标记已读失败:",t),m.error("标记已读失败")}},ft=async()=>{try{await ge(),b.value.forEach(n=>n.isRead=!0),w.value=0,m.success("所有通知已标记为已读")}catch(n){console.error("标记所有已读失败:",n),m.error("标记所有已读失败")}},pt=async n=>{try{await ve("确定要清空所有通知吗？此操作不可恢复。","确认清空",{confirmButtonText:"确定",cancelButtonText:"取消"},n),await he(),b.value=[],w.value=0,m.success("所有通知已清空")}catch(t){t!=="cancel"&&(console.error("清空通知失败:",t),m.error("清空通知失败"))}},gt=()=>{_.push("/admin/notifications")},Z=async()=>{try{j.value=!0;const[n,t]=await Promise.all([fe(10),pe()]);if(n&&(n.code===200||n.success)){const o=n.data||[];b.value=o.map(d=>({id:d.id,title:d.title,description:d.content,time:d.timeAgo,type:d.type,isRead:d.isRead}))}t&&(t.code===200||t.success)&&(w.value=t.data)}catch(n){console.error("加载通知失败:",n)}finally{j.value=!1}},ht=n=>{n&&Z()},kt=n=>{h.value=n;const t=R.value.find(o=>o.key===n);I(n),localStorage.setItem("theme",n),m.success(`已切换到${t.name}`)},I=n=>{const t=document.documentElement;t.classList.remove("theme-light","theme-dark","theme-warm","theme-ocean"),n==="auto"&&(n=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),t.classList.add(`theme-${n}`)},X=n=>{switch(n){case"article":_.push("/admin/articles/create");break;case"stats":_.push("/admin/statistics");break}},bt=()=>{document.fullscreenElement?(document.exitFullscreen(),m.success("已退出全屏模式")):(document.documentElement.requestFullscreen(),m.success("已进入全屏模式"))},wt=n=>{switch(n){case"home":console.log("Navigating to home"),_.push("/"),m.success("已返回首页");break;case"profile":console.log("Navigating to profile"),_.push("/profile");break;case"settings":console.log("Navigating to account-settings"),_.push("/admin/account-settings");break;case"security":console.log("Navigating to security-center"),_.push("/admin/security-center");break;case"help":console.log("Navigating to help-center"),_.push("/admin/help-center");break;case"logout":console.log("Logging out"),g.logout(),m.success("退出登录成功"),_.push("/");break;default:console.log("Unknown command:",n)}};return Lt(()=>{const n=localStorage.getItem("theme")||"light";h.value=n,I(n),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>{h.value==="auto"&&I("auto")}),Z()}),(n,t)=>{const o=Ut,d=we,Y=be,yt=re,K=Pt,Ct=Ht,$=ce,xt=Ot,B=Wt,L=ye,tt=te,y=xe,Et=Ce,At=me,Mt=qt("router-view"),Nt=_e,et=ue;return c(),v("div",Ee,[t[50]||(t[50]=Ft('<div class="bg-decoration" data-v-a514f6cf><div class="floating-shapes" data-v-a514f6cf><div class="shape shape-1" data-v-a514f6cf></div><div class="shape shape-2" data-v-a514f6cf></div><div class="shape shape-3" data-v-a514f6cf></div><div class="shape shape-4" data-v-a514f6cf></div><div class="shape shape-5" data-v-a514f6cf></div></div></div>',1)),s(et,null,{default:a(()=>[s(yt,{width:"300px"},{default:a(()=>[e("div",Ae,[e("div",Me,[e("div",Ne,[e("div",Te,[e("div",Re,[s(o,{size:32},{default:a(()=>[s(l(U))]),_:1})])]),t[8]||(t[8]=e("div",{class:"logo-text"},[e("h2",null,"博客管理"),e("span",null,"Blog Admin")],-1))])]),e("div",ze,[t[23]||(t[23]=e("div",{class:"menu-title"},"主要功能",-1)),s(Y,{"default-active":J.value,router:"",collapse:!1,class:"admin-menu"},{default:a(()=>[s(d,{index:"/admin",class:"menu-item"},{default:a(()=>[e("div",$e,[e("div",Be,[s(o,null,{default:a(()=>[s(l(q))]),_:1})]),t[9]||(t[9]=e("span",null,"仪表盘",-1)),t[10]||(t[10]=e("div",{class:"menu-indicator"},null,-1))])]),_:1}),s(d,{index:"/admin/articles",class:"menu-item"},{default:a(()=>[e("div",Se,[e("div",De,[s(o,null,{default:a(()=>[s(l(it))]),_:1})]),t[11]||(t[11]=e("span",null,"文章管理",-1)),t[12]||(t[12]=e("div",{class:"menu-indicator"},null,-1))])]),_:1}),s(d,{index:"/admin/categories",class:"menu-item"},{default:a(()=>[e("div",Ie,[e("div",Le,[s(o,null,{default:a(()=>[s(l(nt))]),_:1})]),t[13]||(t[13]=e("span",null,"分类管理",-1)),t[14]||(t[14]=e("div",{class:"menu-indicator"},null,-1))])]),_:1}),s(d,{index:"/admin/tags",class:"menu-item"},{default:a(()=>[e("div",Fe,[e("div",Ve,[s(o,null,{default:a(()=>[s(l(at))]),_:1})]),t[15]||(t[15]=e("span",null,"标签管理",-1)),t[16]||(t[16]=e("div",{class:"menu-indicator"},null,-1))])]),_:1}),s(d,{index:"/admin/comments",class:"menu-item"},{default:a(()=>[e("div",qe,[e("div",Ue,[s(o,null,{default:a(()=>[s(l(V))]),_:1})]),t[17]||(t[17]=e("span",null,"评论管理",-1)),t[18]||(t[18]=e("div",{class:"menu-indicator"},null,-1))])]),_:1}),s(d,{index:"/admin/users",class:"menu-item"},{default:a(()=>[e("div",He,[e("div",Pe,[s(o,null,{default:a(()=>[s(l(S))]),_:1})]),t[19]||(t[19]=e("span",null,"用户管理",-1)),t[20]||(t[20]=e("div",{class:"menu-indicator"},null,-1))])]),_:1}),s(d,{index:"/admin/statistics",class:"menu-item"},{default:a(()=>[e("div",Qe,[e("div",je,[s(o,null,{default:a(()=>[s(l(F))]),_:1})]),t[21]||(t[21]=e("span",null,"数据统计",-1)),t[22]||(t[22]=e("div",{class:"menu-indicator"},null,-1))])]),_:1})]),_:1},8,["default-active"])]),e("div",Ge,[t[26]||(t[26]=e("div",{class:"menu-title"},"系统管理",-1)),s(Y,{"default-active":J.value,router:"",collapse:!1,class:"admin-menu"},{default:a(()=>[s(d,{index:"/admin/token-status",class:"menu-item"},{default:a(()=>[e("div",Je,[e("div",Oe,[s(o,null,{default:a(()=>[s(l(st))]),_:1})]),t[24]||(t[24]=e("span",null,"Token监控",-1)),t[25]||(t[25]=e("div",{class:"menu-indicator"},null,-1))])]),_:1})]),_:1},8,["default-active"])])])]),_:1}),s(et,null,{default:a(()=>[s(At,{height:"90px"},{default:a(()=>[e("div",We,[t[49]||(t[49]=e("div",{class:"header-decoration"},[e("div",{class:"decoration-shape shape-1"}),e("div",{class:"decoration-shape shape-2"}),e("div",{class:"decoration-shape shape-3"})],-1)),e("div",Ze,[e("div",Xe,[e("div",Ye,[e("div",Ke,[e("div",ts,[s(o,{size:24},{default:a(()=>[(c(),C(T(_t.value)))]),_:1})]),e("div",es,[e("h1",ss,u(rt.value),1),e("div",as,u(mt.value),1)])]),s(Ct,{separator:"/",class:"breadcrumb"},{default:a(()=>[s(K,{to:"/admin"},{default:a(()=>[s(o,null,{default:a(()=>[s(l(ot))]),_:1}),t[27]||(t[27]=e("span",null,"控制台",-1))]),_:1,__:[27]}),O.value?(c(),C(K,{key:0},{default:a(()=>[e("span",null,u(O.value),1)]),_:1})):H("",!0)]),_:1})]),e("div",ns,[s($,{content:"新建文章",placement:"bottom"},{default:a(()=>[e("div",{class:"quick-btn primary",onClick:t[0]||(t[0]=i=>X("article"))},[s(o,null,{default:a(()=>[s(l(Qt))]),_:1}),t[28]||(t[28]=e("span",null,"写文章",-1))])]),_:1}),s($,{content:"数据统计",placement:"bottom"},{default:a(()=>[e("div",{class:"quick-btn",onClick:t[1]||(t[1]=i=>X("stats"))},[s(o,null,{default:a(()=>[s(l(F))]),_:1})])]),_:1})])]),e("div",is,[e("div",os,[e("div",ls,[e("div",{class:x(["search-box",{"search-focused":D.value}])},[s(o,{class:"search-icon"},{default:a(()=>[s(l(Gt))]),_:1}),jt(e("input",{type:"text",placeholder:"搜索文章、用户、标签...","onUpdate:modelValue":t[2]||(t[2]=i=>Q.value=i),onFocus:t[3]||(t[3]=i=>D.value=!0),onBlur:t[4]||(t[4]=i=>D.value=!1),class:"search-input"},null,544),[[Jt,Q.value]]),t[29]||(t[29]=e("div",{class:"search-shortcut"},"⌘K",-1))],2)]),e("div",ds,[s($,{content:"系统状态良好",placement:"bottom"},{default:a(()=>t[30]||(t[30]=[e("div",{class:"status-indicator online"},[e("div",{class:"status-dot"}),e("span",null,"在线")],-1)])),_:1,__:[30]})]),s(L,{trigger:"click",class:"notification-dropdown",onVisibleChange:ht},{dropdown:a(()=>[e("div",us,[e("div",rs,[t[34]||(t[34]=e("h3",null,"通知中心",-1)),e("div",ms,[s(B,{text:"",size:"small",onClick:ft,disabled:z.value===0},{default:a(()=>t[32]||(t[32]=[E(" 全部已读 ",-1)])),_:1,__:[32]},8,["disabled"]),s(B,{text:"",size:"small",onClick:t[5]||(t[5]=i=>pt(i))},{default:a(()=>t[33]||(t[33]=[E(" 清空 ",-1)])),_:1,__:[33]})])]),e("div",_s,[e("div",{class:x(["tab-item",{active:k.value==="all"}]),onClick:t[6]||(t[6]=i=>k.value="all")}," 全部 ("+u(b.value.length)+") ",3),e("div",{class:x(["tab-item",{active:k.value==="unread"}]),onClick:t[7]||(t[7]=i=>k.value="unread")}," 未读 ("+u(z.value)+") ",3)]),G.value.length>0?(c(),v("div",vs,[(c(!0),v(lt,null,dt(G.value,i=>(c(),v("div",{class:x(["notification-item",{unread:!i.isRead}]),key:i.id,onClick:r=>W(i)},[e("div",{class:x(["notification-avatar",i.type])},[s(o,null,{default:a(()=>[(c(),C(T(vt(i.type))))]),_:2},1024)],2),e("div",ps,[e("div",gs,u(i.title),1),e("div",hs,u(i.description),1),e("div",ks,u(i.time),1)]),i.isRead?H("",!0):(c(),v("div",bs,[s(B,{size:"small",text:"",onClick:Zt(r=>W(i),["stop"])},{default:a(()=>t[35]||(t[35]=[E(" 标记已读 ",-1)])),_:2,__:[35]},1032,["onClick"])]))],10,fs))),128))])):(c(),v("div",ws,[s(o,null,{default:a(()=>[s(l(P))]),_:1}),e("p",null,u(k.value==="unread"?"暂无未读通知":"暂无通知"),1)])),e("div",ys,[s(B,{text:"",onClick:gt},{default:a(()=>t[36]||(t[36]=[E("查看全部通知",-1)])),_:1,__:[36]})])])]),default:a(()=>[e("div",cs,[s(xt,{value:z.value,hidden:z.value===0,max:99},{default:a(()=>[s(o,{size:20},{default:a(()=>[s(l(P))]),_:1})]),_:1},8,["value","hidden"]),t[31]||(t[31]=e("div",{class:"btn-label"},"通知",-1))])]),_:1}),s(L,{trigger:"click",class:"theme-dropdown"},{dropdown:a(()=>[e("div",xs,[t[38]||(t[38]=e("div",{class:"theme-header"},[e("h3",null,"选择主题"),e("p",null,"个性化您的界面体验")],-1)),e("div",Es,[(c(!0),v(lt,null,dt(R.value,i=>(c(),v("div",{class:x(["theme-item",{active:h.value===i.key}]),key:i.key,onClick:r=>kt(i.key)},[e("div",{class:"theme-preview",style:Xt({background:i.preview})},[e("div",Ms,[s(o,null,{default:a(()=>[(c(),C(T(i.icon)))]),_:2},1024)])],4),e("div",Ns,[e("div",Ts,u(i.name),1),e("div",Rs,u(i.description),1)]),h.value===i.key?(c(),v("div",zs,[s(o,null,{default:a(()=>[s(l(Yt))]),_:1})])):H("",!0)],10,As))),128))])])]),default:a(()=>[e("div",Cs,[s(o,{size:20},{default:a(()=>[(c(),C(T(ut.value.icon)))]),_:1}),t[37]||(t[37]=e("div",{class:"btn-label"},"主题",-1))])]),_:1}),s($,{content:"全屏模式",placement:"bottom"},{default:a(()=>[e("div",{class:"action-btn fullscreen-btn",onClick:bt},[s(o,{size:20},{default:a(()=>[s(l(Kt))]),_:1}),t[39]||(t[39]=e("div",{class:"btn-label"},"全屏",-1))])]),_:1}),s(L,{onCommand:wt,class:"user-dropdown",trigger:"click"},{dropdown:a(()=>[s(Et,{class:"user-dropdown-panel"},{default:a(()=>{var i,r;return[e("div",Is,[e("div",Ls,[s(tt,{src:(i=l(g).user)==null?void 0:i.avatar,size:60},{default:a(()=>{var M,N;return[E(u(((N=(M=l(g).user)==null?void 0:M.nickname)==null?void 0:N.charAt(0))||"A"),1)]}),_:1},8,["src"]),e("div",Fs,[e("h4",null,u(((r=l(g).user)==null?void 0:r.nickname)||"管理员"),1)])])]),e("div",Vs,[s(y,{command:"home",class:"menu-item"},{default:a(()=>[s(o,null,{default:a(()=>[s(l(ot))]),_:1}),t[41]||(t[41]=e("span",null,"返回首页",-1))]),_:1,__:[41]}),t[47]||(t[47]=e("div",{class:"dropdown-divider"},null,-1)),s(y,{command:"profile",class:"menu-item"},{default:a(()=>[s(o,null,{default:a(()=>[s(l(S))]),_:1}),t[42]||(t[42]=e("span",null,"个人资料",-1))]),_:1,__:[42]}),s(y,{command:"settings",class:"menu-item"},{default:a(()=>[s(o,null,{default:a(()=>[s(l(U))]),_:1}),t[43]||(t[43]=e("span",null,"账户设置",-1))]),_:1,__:[43]}),s(y,{command:"security",class:"menu-item"},{default:a(()=>[s(o,null,{default:a(()=>[s(l(se))]),_:1}),t[44]||(t[44]=e("span",null,"安全中心",-1))]),_:1,__:[44]}),s(y,{command:"help",class:"menu-item"},{default:a(()=>[s(o,null,{default:a(()=>[s(l(ae))]),_:1}),t[45]||(t[45]=e("span",null,"帮助中心",-1))]),_:1,__:[45]}),t[48]||(t[48]=e("div",{class:"dropdown-divider"},null,-1)),s(y,{command:"logout",class:"menu-item logout"},{default:a(()=>[s(o,null,{default:a(()=>[s(l(ne))]),_:1}),t[46]||(t[46]=e("span",null,"退出登录",-1))]),_:1,__:[46]})])]}),_:1})]),default:a(()=>{var i,r;return[e("div",$s,[e("div",Bs,[s(tt,{src:(i=l(g).user)==null?void 0:i.avatar,size:44,class:"user-avatar"},{default:a(()=>{var M,N;return[E(u(((N=(M=l(g).user)==null?void 0:M.nickname)==null?void 0:N.charAt(0))||"A"),1)]}),_:1},8,["src"]),t[40]||(t[40]=e("div",{class:"online-indicator"},null,-1))]),e("div",Ss,[e("div",Ds,u(((r=l(g).user)==null?void 0:r.nickname)||"管理员"),1)]),s(o,{class:"dropdown-arrow"},{default:a(()=>[s(l(ee))]),_:1})])]}),_:1})])])])])]),_:1}),s(Nt,null,{default:a(()=>[e("div",qs,[s(Mt,null,{default:a(({Component:i,route:r})=>[s(ie,{name:ct(r),mode:"out-in"},{default:a(()=>[(c(),C(T(i),{key:r.path}))]),_:2},1032,["name"])]),_:1})])]),_:1})]),_:1})]),_:1})])}}},va=Tt(Us,[["__scopeId","data-v-a514f6cf"]]);export{va as default};
