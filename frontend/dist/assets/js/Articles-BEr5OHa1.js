import{_ as L,r as l,a4 as q,o as F,a as M,b as p,d as o,P as O,e as r,g as R,h as j,s as J,E as Q,w as A,J as E,N as b,O as V,L as B,Q as y,k as G,l as n,I as z}from"./index-Da7ZqcH5.js";/* empty css                *//* empty css              *//* empty css                   *//* empty css               */import"./scrollbar-PN-ehNXN.js";import{A as H}from"./ArticleCard-BnxaohSY.js";import{c as T}from"./category-BuqsFtfq.js";import{E as W,a as X}from"./index-mDFjMy5P.js";import{v as Y}from"./directive-iqmOBkSf.js";import{E as Z}from"./index-DSEo_ZHY.js";import{E as $}from"./index-DuvIoQvO.js";import"./vnode-DsZHVpXe.js";import"./placeholder-BiywPu__.js";import"./castArray-DVWVVBpp.js";import"./isEqual-HUGtL056.js";import"./_Uint8Array-CNK7Frb1.js";const ee={class:"articles-page"},ae={class:"container"},te={class:"filters"},le={class:"search-box"},se={class:"filter-options"},oe={class:"articles-content"},re={class:"articles-grid"},ne={key:0,class:"pagination"},ie={key:1,class:"empty-state"},ue={__name:"Articles",setup(ce){const w=M();G();const h=l(!1),v=l([]),C=l([]),m=l(0),i=l(1),f=l(12),g=l(""),u=l(""),c=l("latest"),_=async()=>{h.value=!0;try{const a=c.value==="latest"?"publishedAt":c.value==="views"?"viewCount":c.value==="likes"?"likeCount":"publishedAt",e={page:i.value-1,size:f.value,sortBy:a,sortDir:"desc"};let s;if(g.value.trim()?(e.keyword=g.value.trim(),e.sortBy=S(c.value),u.value&&(e.category=u.value),s=await y.searchArticles(e)):u.value?(delete e.sortBy,delete e.sortDir,s=await y.getArticlesByCategory(u.value,e)):s=await y.getPublishedArticles(e),s&&s.data){const d=s.data;v.value=d.content||[],m.value=d.totalElements||0}else v.value=[],m.value=0}catch(a){console.error("加载文章失败:",a),B.error("加载文章失败，请稍后重试"),v.value=[],m.value=0}finally{h.value=!1}},x=async()=>{try{const a=await T.getAllCategories();a&&a.data&&(C.value=a.data)}catch(a){console.error("加载分类失败:",a),B.error("加载分类失败")}},S=a=>{switch(a){case"latest":return"latest";case"views":return"views";case"likes":return"likes";default:return"relevance"}},P=()=>{i.value=1,_()},U=a=>{f.value=a,i.value=1,_()},D=a=>{i.value=a,_()};return q([u,c],()=>{i.value=1,_()}),F(()=>{w.query.search&&(g.value=w.query.search),x(),_()}),(a,e)=>{const s=Q,d=X,k=W,K=Z,N=$,I=Y;return n(),p("div",ee,[o("div",ae,[e[5]||(e[5]=o("div",{class:"page-header"},[o("h1",null,"文章列表"),o("p",null,"探索精彩内容，发现有趣观点")],-1)),o("div",te,[o("div",le,[r(s,{modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=t=>g.value=t),placeholder:"搜索文章...","prefix-icon":j(J),onKeyup:R(P,["enter"]),clearable:""},null,8,["modelValue","prefix-icon"])]),o("div",se,[r(k,{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=t=>u.value=t),placeholder:"选择分类",clearable:""},{default:A(()=>[(n(!0),p(b,null,V(C.value,t=>(n(),z(d,{key:t.id,label:t.name,value:t.slug},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),r(k,{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=t=>c.value=t),placeholder:"排序方式"},{default:A(()=>[r(d,{label:"最新发布",value:"latest"}),r(d,{label:"最多阅读",value:"views"}),r(d,{label:"最多点赞",value:"likes"})]),_:1},8,["modelValue"])])]),O((n(),p("div",oe,[o("div",re,[(n(!0),p(b,null,V(v.value,t=>(n(),z(H,{key:t.id,article:t},null,8,["article"]))),128))]),m.value>0?(n(),p("div",ne,[r(K,{"current-page":i.value,"onUpdate:currentPage":e[3]||(e[3]=t=>i.value=t),"page-size":f.value,"onUpdate:pageSize":e[4]||(e[4]=t=>f.value=t),total:m.value,"page-sizes":[12,24,48],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:U,onCurrentChange:D},null,8,["current-page","page-size","total"])])):E("",!0),!h.value&&v.value.length===0?(n(),p("div",ie,[r(N,{description:"暂无文章"})])):E("",!0)])),[[I,h.value]])])])}}},ze=L(ue,[["__scopeId","data-v-66a3ceec"]]);export{ze as default};
