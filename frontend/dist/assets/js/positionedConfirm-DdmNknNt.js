import{r as e,p as t,S as n,af as i,w as o,H as a,o as s,c as r,K as l,u as c,a as u,I as d,Q as p,O as f,M as m,V as g,C as y,a1 as v,q as w,au as b}from"./vue-B9wWIsxR.js";/* empty css             *//* empty css                  */import{r as x,ay as h,b2 as B,aO as T,aL as C,j as _,b3 as k}from"./element-plus-CXASJE3V.js";import{_ as j}from"./_plugin-vue_export-helper-BCo6x5W8.js";const E={class:"dialog-header"},S={class:"dialog-icon"},z={class:"dialog-title"},O={class:"dialog-content"},q={class:"dialog-message"},I={class:"dialog-footer"},L={name:"PositionedConfirm"},P=j(Object.assign(L,{props:{visible:{type:Boolean,default:!1},title:{type:String,default:"提示"},message:{type:String,required:!0},type:{type:String,default:"warning",validator:e=>["warning","error","info","question"].includes(e)},confirmButtonText:{type:String,default:"确定"},cancelButtonText:{type:String,default:"取消"},triggerElement:{type:Object,default:null}},emits:["confirm","cancel","update:visible"],setup(b,{emit:k}){const j=b,L=k,P=e(null),R=e({}),$=()=>{if(!j.triggerElement||!P.value)return;const e=j.triggerElement.getBoundingClientRect(),t=P.value.getBoundingClientRect(),n=window.innerWidth,i=window.innerHeight;let o=e.left+e.width/2-t.width/2,a=e.top-t.height-10;o<10&&(o=10),o+t.width>n-10&&(o=n-t.width-10),a<10&&(a=e.bottom+10),a+t.height>i-10&&(a=i-t.height-10),R.value={position:"fixed",left:`${o}px`,top:`${a}px`,zIndex:9999}},H=()=>{L("confirm"),L("update:visible",!1)},N=()=>{L("cancel"),L("update:visible",!1)},K=()=>{N()},M=()=>{j.visible&&w(()=>{$()})},Q=()=>{j.visible&&w(()=>{$()})};t(()=>{window.addEventListener("resize",M),Q()}),n(()=>{window.removeEventListener("resize",M)});const{visible:U}=i(j);return o(U,()=>{Q()}),(e,t)=>{const n=x,i=_;return s(),a(v,{to:"body"},[c(U)?(s(),r("div",{key:0,class:"positioned-confirm-overlay",onClick:K},[u("div",{ref_key:"dialogRef",ref:P,class:"positioned-confirm-dialog",style:y(R.value),onClick:t[0]||(t[0]=g(()=>{},["stop"]))},[u("div",E,[u("div",S,["warning"===b.type?(s(),a(n,{key:0,class:"warning-icon"},{default:d(()=>[p(c(h))]),_:1})):"error"===b.type?(s(),a(n,{key:1,class:"error-icon"},{default:d(()=>[p(c(B))]),_:1})):"info"===b.type?(s(),a(n,{key:2,class:"info-icon"},{default:d(()=>[p(c(T))]),_:1})):(s(),a(n,{key:3,class:"question-icon"},{default:d(()=>[p(c(C))]),_:1}))]),u("h3",z,f(b.title),1)]),u("div",O,[u("p",q,f(b.message),1)]),u("div",I,[p(i,{size:"small",onClick:N},{default:d(()=>[m(f(b.cancelButtonText),1)]),_:1}),p(i,{type:"error"===b.type?"danger":"primary",size:"small",onClick:H},{default:d(()=>[m(f(b.confirmButtonText),1)]),_:1},8,["type"])])],4)])):l("",!0)])}}}),[["__scopeId","data-v-8271ec89"]]);function R(e,t="提示",n={},i=null){return new Promise((o,a)=>{const s=document.createElement("div");document.body.appendChild(s);const r={type:"warning",confirmButtonText:"确定",cancelButtonText:"取消",...n},l=b(P,{visible:!0,message:e,title:t,triggerElement:i,...r,onConfirm:()=>{c(),o("confirm")},onCancel:()=>{c(),a("cancel")},"onUpdate:visible":e=>{e||(c(),a("cancel"))}});function c(){setTimeout(()=>{l.unmount(),s.parentNode&&s.parentNode.removeChild(s)},300)}l.use(k),l.mount(s)})}function $(e){return e.currentTarget||e.target}function H(e,t){return R(`确定要删除"${e}"吗？删除后无法恢复！`,"确认删除",{type:"error",confirmButtonText:"删除",cancelButtonText:"取消"},$(t))}function N(e,t="警告",n){return R(e,t,{type:"warning",confirmButtonText:"确定",cancelButtonText:"取消"},$(n))}function K(e,t="提示",n){return R(e,t,{type:"info",confirmButtonText:"确定",cancelButtonText:"取消"},$(n))}export{K as a,H as b,N as s};
