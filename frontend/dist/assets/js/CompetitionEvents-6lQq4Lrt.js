import{_ as O,r as g,c as Q,o as U,b as u,d as t,e as a,w as n,n as X,N as z,O as b,J as m,j as q,Q as K,L as P,k as W,l as c,h as d,z as E,G as _,H as l,ag as T,an as Y,ai as Z,U as tt,ao as st,I as C,X as et,a7 as ot,D as at,af as it,aj as I}from"./index-Da7ZqcH5.js";import{b as $}from"./placeholder-BiywPu__.js";const nt={class:"competition-events"},lt={class:"page-header"},rt={class:"container"},ct={class:"header-content"},dt={class:"header-icon"},ut={class:"filter-section"},_t={class:"container"},pt={class:"filter-tabs"},gt={class:"events-section"},mt={class:"container"},vt={class:"competition-showcase"},ft=["onClick"],ht={class:"competition-status-badge"},yt={class:"status-text"},kt={class:"competition-poster"},Ct=["src","alt"],wt={class:"poster-overlay"},zt={class:"poster-header"},bt={key:0,class:"prize-highlight"},Et={class:"poster-title"},It={class:"competition-info"},xt={class:"competition-description"},Mt={class:"key-info"},St={class:"info-row"},Pt={class:"info-item"},Tt={class:"info-content"},$t={class:"value"},At={class:"info-item"},Bt={class:"info-content"},Dt={class:"value"},Nt={class:"info-row"},Vt={class:"info-item"},jt={class:"info-content"},Lt={class:"value"},Ft={key:0,class:"info-item"},Rt={class:"info-content"},Gt={class:"value"},Ht={class:"competition-tags"},Jt={class:"competition-footer"},Ot={class:"competition-stats"},Qt={class:"stat-item"},Ut={class:"stat-item"},Xt={class:"stat-item"},qt={class:"action-button"},Kt={key:0,class:"load-more"},Wt={key:1,class:"empty-state"},Yt={__name:"CompetitionEvents",setup(Zt){const A=W(),v=g([]),f=g(!1),x=g(!0),h=g(1),y=g("all"),B=[{value:"all",label:"全部活动"},{value:"registration",label:"报名中"},{value:"ongoing",label:"进行中"},{value:"ended",label:"已结束"}];$("ACM Contest",300,200,"#f56c6c"),$("AI Challenge",300,200,"#409eff");const M=Q(()=>y.value==="all"?v.value:v.value.filter(e=>e.status===y.value)),w=async()=>{f.value=!0;try{const e=await K.getArticlesByCategory("contest",{page:h.value-1,size:10});if(e.code===200){const r=(e.data.content||[]).map(i=>{var k;return{id:i.id,title:i.title,description:i.summary,coverImage:i.coverImage,slug:i.slug,status:"registration",type:"programming",views:i.viewCount||0,likes:i.likeCount||0,comments:i.commentCount||0,organizer:((k=i.author)==null?void 0:k.nickname)||"主办方",tags:i.tags||[]}});h.value===1?v.value=r:v.value.push(...r),x.value=!e.data.last}else P.error(e.message||"加载活动失败")}catch(e){console.error("加载活动失败:",e),P.error("加载活动失败")}finally{f.value=!1}},D=()=>{h.value++,w()},N=e=>{y.value=e,h.value=1,w()},V=e=>{A.push(`/competition-events/${e}`)},j=e=>{console.log("报名活动:",e)},L=e=>{console.log("查看进度:",e)},F=e=>{console.log("查看结果:",e)},S=e=>new Date(e).toLocaleDateString("zh-CN",{month:"short",day:"numeric"}),R=e=>({算法:"primary","C++":"success",数据结构:"info",人工智能:"warning",机器学习:"danger",深度学习:"primary",编程:"success",设计:"warning",创新:"info"})[e]||"default",G=e=>{e.target.src="/vite.svg"},H=e=>({registration:"报名中",ongoing:"进行中",ended:"已结束"})[e]||"未知",J=e=>({programming:"编程竞赛",ai:"AI竞赛",design:"设计竞赛",innovation:"创新竞赛"})[e]||"其他";return U(()=>{w()}),(e,o)=>{const r=X,i=q,k=et;return c(),u("div",nt,[t("div",lt,[t("div",rt,[t("div",ct,[t("div",dt,[a(r,null,{default:n(()=>[a(d(E))]),_:1})]),o[0]||(o[0]=t("div",{class:"header-text"},[t("h1",{class:"page-title"},"竞赛活动"),t("p",{class:"page-subtitle"},"参与竞赛，展示才华，赢取荣誉")],-1))])])]),t("div",ut,[t("div",_t,[t("div",pt,[(c(),u(z,null,b(B,s=>a(i,{key:s.value,type:y.value===s.value?"primary":"",onClick:p=>N(s.value),class:"filter-btn"},{default:n(()=>[_(l(s.label),1)]),_:2},1032,["type","onClick"])),64))])])]),t("div",gt,[t("div",mt,[t("div",vt,[(c(!0),u(z,null,b(M.value,s=>(c(),u("article",{key:s.id,class:T(["competition-card",`status-${s.status}`]),onClick:p=>V(s.slug)},[t("div",ht,[t("span",yt,l(H(s.status)),1)]),t("div",kt,[t("img",{src:s.coverImage||"/default-competition.jpg",alt:s.title,onError:G},null,40,Ct),t("div",wt,[t("div",zt,[t("div",{class:T(["competition-type",`type-${s.type}`])},l(J(s.type)),3),s.prizePool?(c(),u("div",bt,[a(r,null,{default:n(()=>[a(d(E))]),_:1}),t("span",null,l(s.prizePool),1)])):m("",!0)]),t("div",Et,[t("h3",null,l(s.title),1)])])]),t("div",It,[t("div",xt,l(s.description),1),t("div",Mt,[t("div",St,[t("div",Pt,[a(r,null,{default:n(()=>[a(d(Y))]),_:1}),t("div",Tt,[o[1]||(o[1]=t("span",{class:"label"},"报名截止",-1)),t("span",$t,l(S(s.registrationEnd)),1)])]),t("div",At,[a(r,null,{default:n(()=>[a(d(Z))]),_:1}),t("div",Bt,[o[2]||(o[2]=t("span",{class:"label"},"比赛时间",-1)),t("span",Dt,l(S(s.competitionStart)),1)])])]),t("div",Nt,[t("div",Vt,[a(r,null,{default:n(()=>[a(d(tt))]),_:1}),t("div",jt,[o[3]||(o[3]=t("span",{class:"label"},"参赛人数",-1)),t("span",Lt,l(s.participants)+"/"+l(s.maxParticipants||"∞"),1)])]),s.organizer?(c(),u("div",Ft,[a(r,null,{default:n(()=>[a(d(st))]),_:1}),t("div",Rt,[o[4]||(o[4]=t("span",{class:"label"},"主办方",-1)),t("span",Gt,l(s.organizer),1)])])):m("",!0)])]),t("div",Ht,[(c(!0),u(z,null,b(s.tags,p=>(c(),C(k,{key:p.id,size:"small",type:R(p.name)},{default:n(()=>[_(l(p.name),1)]),_:2},1032,["type"]))),128))]),t("div",Jt,[t("div",Ot,[t("span",Qt,[a(r,null,{default:n(()=>[a(d(ot))]),_:1}),_(" "+l(s.views),1)]),t("span",Ut,[a(r,null,{default:n(()=>[a(d(at))]),_:1}),_(" "+l(s.likes),1)]),t("span",Xt,[a(r,null,{default:n(()=>[a(d(it))]),_:1}),_(" "+l(s.comments),1)])]),t("div",qt,[s.status==="registration"?(c(),C(i,{key:0,type:"primary",size:"large",onClick:I(p=>j(s.id),["stop"])},{default:n(()=>o[5]||(o[5]=[_(" 立即报名 ",-1)])),_:2,__:[5]},1032,["onClick"])):s.status==="ongoing"?(c(),C(i,{key:1,type:"warning",size:"large",onClick:I(p=>L(s.id),["stop"])},{default:n(()=>o[6]||(o[6]=[_(" 查看进度 ",-1)])),_:2,__:[6]},1032,["onClick"])):s.status==="ended"?(c(),C(i,{key:2,type:"info",size:"large",onClick:I(p=>F(s.id),["stop"])},{default:n(()=>o[7]||(o[7]=[_(" 查看结果 ",-1)])),_:2,__:[7]},1032,["onClick"])):m("",!0)])])])],10,ft))),128))]),x.value?(c(),u("div",Kt,[a(i,{type:"primary",size:"large",loading:f.value,onClick:D},{default:n(()=>o[8]||(o[8]=[_(" 加载更多 ",-1)])),_:1,__:[8]},8,["loading"])])):m("",!0),!f.value&&M.value.length===0?(c(),u("div",Wt,[a(r,{class:"empty-icon"},{default:n(()=>[a(d(E))]),_:1}),o[9]||(o[9]=t("h3",null,"暂无竞赛活动",-1)),o[10]||(o[10]=t("p",null,"期待更多精彩的竞赛活动",-1))])):m("",!0)])])])}}},es=O(Yt,[["__scopeId","data-v-391d64a9"]]);export{es as default};
