import{br as j,bL as M,bS as L,bk as S,cN as T,cL as A,bt as y,cf as W,r as g,a4 as G,bm as N,c as d,bv as q,dq as k,bR as z,bn as Q,bl as V,aQ as E,b as D,l as K,bx as _,ag as b,h as e,Y as R,c2 as U,aT as Y,bW as J,d as h,e as P,g as X,aj as Z,w as x,P as ee,a5 as se,G as ae,H as te,I as oe,K as le,n as ne,bA as ie,c6 as ce}from"./index-Da7ZqcH5.js";import{c as $}from"./castArray-DVWVVBpp.js";import{E as re}from"./index-Ddj3Fd5B.js";const B=a=>j(a)||M(a)||L(a),de=S({accordion:Boolean,modelValue:{type:y([Array,String,Number]),default:()=>W([])},expandIconPosition:{type:y([String]),default:"right"},beforeCollapse:{type:y(Function)}}),ue={[A]:B,[T]:B},F=Symbol("collapseContextKey"),pe="ElCollapse",me=(a,n)=>{const t=g($(a.modelValue)),i=o=>{t.value=o;const l=a.accordion?t.value[0]:t.value;n(A,l),n(T,l)},s=o=>{if(a.accordion)i([t.value[0]===o?"":o]);else{const l=[...t.value],r=l.indexOf(o);r>-1?l.splice(r,1):l.push(o),i(l)}},c=async o=>{const{beforeCollapse:l}=a;if(!l){s(o);return}const r=l(o);[k(r),z(r)].includes(!0)||Q(pe,"beforeCollapse must return type `Promise<boolean>` or `boolean`"),k(r)?r.then(p=>{p!==!1&&s(o)}).catch(p=>{}):r&&s(o)};return G(()=>a.modelValue,()=>t.value=$(a.modelValue),{deep:!0}),q(F,{activeNames:t,handleItemClick:c}),{activeNames:t,setActiveNames:i}},be=a=>{const n=N("collapse");return{rootKls:d(()=>[n.b(),n.b(`icon-position-${a.expandIconPosition}`)])}},fe=E({name:"ElCollapse"}),ve=E({...fe,props:de,emits:ue,setup(a,{expose:n,emit:t}){const i=a,{activeNames:s,setActiveNames:c}=me(i,t),{rootKls:o}=be(i);return n({activeNames:s,setActiveNames:c}),(l,r)=>(K(),D("div",{class:b(e(o))},[_(l.$slots,"default")],2))}});var Ce=V(ve,[["__file","collapse.vue"]]);const he=S({title:{type:String,default:""},name:{type:y([String,Number]),default:void 0},icon:{type:U,default:R},disabled:Boolean}),ye=a=>{const n=Y(F),{namespace:t}=N("collapse"),i=g(!1),s=g(!1),c=J(),o=d(()=>c.current++),l=d(()=>{var u;return(u=a.name)!=null?u:`${t.value}-id-${c.prefix}-${e(o)}`}),r=d(()=>n==null?void 0:n.activeNames.value.includes(e(l)));return{focusing:i,id:o,isActive:r,handleFocus:()=>{setTimeout(()=>{s.value?s.value=!1:i.value=!0},50)},handleHeaderClick:u=>{if(a.disabled)return;const m=u.target;m!=null&&m.closest("input, textarea, select")||(n==null||n.handleItemClick(e(l)),i.value=!1,s.value=!0)},handleEnterClick:u=>{const m=u.target;m!=null&&m.closest("input, textarea, select")||(u.preventDefault(),n==null||n.handleItemClick(e(l)))}}},_e=(a,{focusing:n,isActive:t,id:i})=>{const s=N("collapse"),c=d(()=>[s.b("item"),s.is("active",e(t)),s.is("disabled",a.disabled)]),o=d(()=>[s.be("item","header"),s.is("active",e(t)),{focusing:e(n)&&!a.disabled}]),l=d(()=>[s.be("item","arrow"),s.is("active",e(t))]),r=d(()=>[s.be("item","title")]),v=d(()=>s.be("item","wrap")),p=d(()=>s.be("item","content")),C=d(()=>s.b(`content-${e(i)}`)),u=d(()=>s.b(`head-${e(i)}`));return{itemTitleKls:r,arrowKls:l,headKls:o,rootKls:c,itemWrapperKls:v,itemContentKls:p,scopedContentId:C,scopedHeadId:u}},Ee=E({name:"ElCollapseItem"}),Ie=E({...Ee,props:he,setup(a,{expose:n}){const t=a,{focusing:i,id:s,isActive:c,handleFocus:o,handleHeaderClick:l,handleEnterClick:r}=ye(t),{arrowKls:v,headKls:p,rootKls:C,itemTitleKls:u,itemWrapperKls:m,itemContentKls:O,scopedContentId:I,scopedHeadId:w}=_e(t,{focusing:i,isActive:c,id:s});return n({isActive:c}),(f,ge)=>(K(),D("div",{class:b(e(C))},[h("div",{id:e(w),class:b(e(p)),"aria-expanded":e(c),"aria-controls":e(I),"aria-describedby":e(I),tabindex:f.disabled?-1:0,role:"button",onClick:e(l),onKeydown:X(Z(e(r),["stop"]),["space","enter"]),onFocus:e(o),onBlur:Ke=>i.value=!1},[h("span",{class:b(e(u))},[_(f.$slots,"title",{isActive:e(c)},()=>[ae(te(f.title),1)])],2),_(f.$slots,"icon",{isActive:e(c)},()=>[P(e(ne),{class:b(e(v))},{default:x(()=>[(K(),oe(le(f.icon)))]),_:1},8,["class"])])],42,["id","aria-expanded","aria-controls","aria-describedby","tabindex","onClick","onKeydown","onFocus","onBlur"]),P(e(re),null,{default:x(()=>[ee(h("div",{id:e(I),role:"region",class:b(e(m)),"aria-hidden":!e(c),"aria-labelledby":e(w)},[h("div",{class:b(e(O))},[_(f.$slots,"default")],2)],10,["id","aria-hidden","aria-labelledby"]),[[se,e(c)]])]),_:3})],2))}});var H=V(Ie,[["__file","collapse-item.vue"]]);const Pe=ie(Ce,{CollapseItem:H}),xe=ce(H);export{Pe as E,xe as a};
