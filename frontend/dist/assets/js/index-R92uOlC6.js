import{bQ as bn,bl as H,aQ as A,bx as F,r as C,aT as R,o as Ce,h as y,aX as ye,bv as ne,bk as ae,bt as Y,c as _,bp as ue,b_ as hn,a4 as ce,bo as gn,f as K,I as te,l as z,w as P,e as V,c0 as In,c1 as _n,c2 as ie,bK as w,b as oe,J as Ne,c3 as En,bG as me,ag as le,V as Ve,n as we,j as je,bm as j,c4 as Cn,bu as yn,c5 as wn,bZ as He,aV as ve,aY as xe,d as Ie,K as Mn,aj as ke,N as Me,R as Tn,bA as qe,c6 as be,c7 as ge,T as Sn,c8 as he,c9 as $n,ca as Se,cb as On,bn as _e,Y as Nn,cc as Qe,av as Re,aR as L,bL as de,P as Ze,a5 as kn,cd as ze,bS as Xe,by as Pn,aW as Rn,bJ as Ge,bH as Fn,ce as Bn,cf as Ln,bz as An,cg as Dn,ch as Kn,G as zn,H as Gn}from"./index-Da7ZqcH5.js";import{c as q,u as Ye,r as Yn,a as Wn,O as Un,E as Fe,b as Jn,w as We,F as Vn,C as jn}from"./scrollbar-PN-ehNXN.js";import{c as Hn}from"./castArray-DVWVVBpp.js";import{E as xn}from"./index-Ddj3Fd5B.js";import{f as qn}from"./vnode-DsZHVpXe.js";const en=(...e)=>n=>{e.forEach(o=>{bn(o)?o(n):o.value=n})},Qn=A({inheritAttrs:!1});function Zn(e,n,o,t,r,p){return F(e.$slots,"default")}var Xn=H(Qn,[["render",Zn],["__file","collection.vue"]]);const et=A({name:"ElCollectionItem",inheritAttrs:!1});function nt(e,n,o,t,r,p){return F(e.$slots,"default")}var tt=H(et,[["render",nt],["__file","collection-item.vue"]]);const nn="data-el-collection-item",tn=e=>{const n=`El${e}Collection`,o=`${n}Item`,t=Symbol(n),r=Symbol(o),p={...Xn,name:n,setup(){const d=C(),l=new Map;ne(t,{itemMap:l,getItems:()=>{const E=y(d);if(!E)return[];const b=Array.from(E.querySelectorAll(`[${nn}]`));return[...l.values()].sort((a,f)=>b.indexOf(a.ref)-b.indexOf(f.ref))},collectionRef:d})}},c={...tt,name:o,setup(d,{attrs:l}){const v=C(),E=R(t,void 0);ne(r,{collectionItemRef:v}),Ce(()=>{const b=y(v);b&&E.itemMap.set(b,{ref:b,...l})}),ye(()=>{const b=y(v);E.itemMap.delete(b)})}};return{COLLECTION_INJECTION_KEY:t,COLLECTION_ITEM_INJECTION_KEY:r,ElCollection:p,ElCollectionItem:c}},ot=ae({style:{type:Y([String,Array,Object])},currentTabId:{type:Y(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:Y(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:lt,ElCollectionItem:st,COLLECTION_INJECTION_KEY:Be,COLLECTION_ITEM_INJECTION_KEY:at}=tn("RovingFocusGroup"),Le=Symbol("elRovingFocusGroup"),on=Symbol("elRovingFocusGroupItem"),rt={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},it=(e,n)=>e,ut=(e,n,o)=>{const t=it(e.code);return rt[t]},ct=(e,n)=>e.map((o,t)=>e[(t+n)%e.length]),Ae=e=>{const{activeElement:n}=document;for(const o of e)if(o===n||(o.focus(),n!==document.activeElement))return},Ue="currentTabIdChange",Je="rovingFocusGroup.entryFocus",dt={bubbles:!1,cancelable:!0},pt=A({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:ot,emits:[Ue,"entryFocus"],setup(e,{emit:n}){var o;const t=C((o=e.currentTabId||e.defaultCurrentTabId)!=null?o:null),r=C(!1),p=C(!1),c=C(),{getItems:d}=R(Be,void 0),l=_(()=>[{outline:"none"},e.style]),v=I=>{n(Ue,I)},E=()=>{r.value=!0},b=q(I=>{var S;(S=e.onMousedown)==null||S.call(e,I)},()=>{p.value=!0}),m=q(I=>{var S;(S=e.onFocus)==null||S.call(e,I)},I=>{const S=!y(p),{target:W,currentTarget:$}=I;if(W===$&&S&&!y(r)){const U=new Event(Je,dt);if($==null||$.dispatchEvent(U),!U.defaultPrevented){const O=d().filter(B=>B.focusable),G=O.find(B=>B.active),M=O.find(B=>B.id===y(t)),D=[G,M,...O].filter(Boolean).map(B=>B.ref);Ae(D)}}p.value=!1}),a=q(I=>{var S;(S=e.onBlur)==null||S.call(e,I)},()=>{r.value=!1}),f=(...I)=>{n("entryFocus",...I)};ne(Le,{currentTabbedId:hn(t),loop:ue(e,"loop"),tabIndex:_(()=>y(r)?-1:0),rovingFocusGroupRef:c,rovingFocusGroupRootStyle:l,orientation:ue(e,"orientation"),dir:ue(e,"dir"),onItemFocus:v,onItemShiftTab:E,onBlur:a,onFocus:m,onMousedown:b}),ce(()=>e.currentTabId,I=>{t.value=I??null}),gn(c,Je,f)}});function ft(e,n,o,t,r,p){return F(e.$slots,"default")}var mt=H(pt,[["render",ft],["__file","roving-focus-group-impl.vue"]]);const vt=A({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:lt,ElRovingFocusGroupImpl:mt}});function bt(e,n,o,t,r,p){const c=K("el-roving-focus-group-impl"),d=K("el-focus-group-collection");return z(),te(d,null,{default:P(()=>[V(c,In(_n(e.$attrs)),{default:P(()=>[F(e.$slots,"default")]),_:3},16)]),_:3})}var ht=H(vt,[["render",bt],["__file","roving-focus-group.vue"]]);const gt=ae({trigger:Wn.trigger,triggerKeys:{type:Y(Array),default:()=>[w.enter,w.numpadEnter,w.space,w.down]},effect:{...Ye.effect,default:"light"},type:{type:Y(String)},placement:{type:Y(String),default:"bottom"},popperOptions:{type:Y(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:Y([Number,String]),default:0},maxHeight:{type:Y([Number,String]),default:""},popperClass:{type:String,default:""},disabled:Boolean,role:{type:String,values:Yn,default:"menu"},buttonProps:{type:Y(Object)},teleported:Ye.teleported,persistent:{type:Boolean,default:!0}}),ln=ae({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:ie}}),It=ae({onKeydown:{type:Y(Function)}}),_t=[w.down,w.pageDown,w.home],sn=[w.up,w.pageUp,w.end],Et=[..._t,...sn],{ElCollection:Ct,ElCollectionItem:yt,COLLECTION_INJECTION_KEY:wt,COLLECTION_ITEM_INJECTION_KEY:Mt}=tn("Dropdown"),Te=Symbol("elDropdown"),an="elDropdown",{ButtonGroup:Tt}=je,St=A({name:"ElDropdown",components:{ElButton:je,ElButtonGroup:Tt,ElScrollbar:Jn,ElDropdownCollection:Ct,ElTooltip:Fe,ElRovingFocusGroup:ht,ElOnlyChild:Un,ElIcon:we,ArrowDown:Ve},props:gt,emits:["visible-change","click","command"],setup(e,{emit:n}){const o=ve(),t=j("dropdown"),{t:r}=Cn(),p=C(),c=C(),d=C(),l=C(),v=C(null),E=C(null),b=C(!1),m=_(()=>({maxHeight:yn(e.maxHeight)})),a=_(()=>[t.m(O.value)]),f=_(()=>Hn(e.trigger)),I=He().value,S=_(()=>e.id||I);ce([p,f],([g,s],[i])=>{var h,T,u;(h=i==null?void 0:i.$el)!=null&&h.removeEventListener&&i.$el.removeEventListener("pointerenter",M),(T=g==null?void 0:g.$el)!=null&&T.removeEventListener&&g.$el.removeEventListener("pointerenter",M),(u=g==null?void 0:g.$el)!=null&&u.addEventListener&&s.includes("hover")&&g.$el.addEventListener("pointerenter",M)},{immediate:!0}),ye(()=>{var g,s;(s=(g=p.value)==null?void 0:g.$el)!=null&&s.removeEventListener&&p.value.$el.removeEventListener("pointerenter",M)});function W(){$()}function $(){var g;(g=d.value)==null||g.onClose()}function U(){var g;(g=d.value)==null||g.onOpen()}const O=wn();function G(...g){n("command",...g)}function M(){var g,s;(s=(g=p.value)==null?void 0:g.$el)==null||s.focus({preventScroll:!0})}function J(){}function D(){const g=y(l);f.value.includes("hover")&&(g==null||g.focus({preventScroll:!0})),E.value=null}function B(g){E.value=g}function X(g){b.value||(g.preventDefault(),g.stopImmediatePropagation())}function ee(){n("visible-change",!0)}function Q(g){var s;(g==null?void 0:g.type)==="keydown"&&((s=l.value)==null||s.focus())}function se(){n("visible-change",!1)}return ne(Te,{contentRef:l,role:_(()=>e.role),triggerId:S,isUsingKeyboard:b,onItemEnter:J,onItemLeave:D}),ne(an,{instance:o,dropdownSize:O,handleClick:W,commandHandler:G,trigger:ue(e,"trigger"),hideOnClick:ue(e,"hideOnClick")}),{t:r,ns:t,scrollbar:v,wrapStyle:m,dropdownTriggerKls:a,dropdownSize:O,triggerId:S,currentTabId:E,handleCurrentTabIdChange:B,handlerMainButtonClick:g=>{n("click",g)},handleEntryFocus:X,handleClose:$,handleOpen:U,handleBeforeShowTooltip:ee,handleShowTooltip:Q,handleBeforeHideTooltip:se,onFocusAfterTrapped:g=>{var s,i;g.preventDefault(),(i=(s=l.value)==null?void 0:s.focus)==null||i.call(s,{preventScroll:!0})},popperRef:d,contentRef:l,triggeringElementRef:p,referenceElementRef:c}}});function $t(e,n,o,t,r,p){var c;const d=K("el-dropdown-collection"),l=K("el-roving-focus-group"),v=K("el-scrollbar"),E=K("el-only-child"),b=K("el-tooltip"),m=K("el-button"),a=K("arrow-down"),f=K("el-icon"),I=K("el-button-group");return z(),oe("div",{class:le([e.ns.b(),e.ns.is("disabled",e.disabled)])},[V(b,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":e.trigger==="hover"?e.hideTimeout:0,"manual-mode":!0,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"reference-element":(c=e.referenceElementRef)==null?void 0:c.$el,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-after":e.trigger==="hover"?e.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,pure:"",persistent:e.persistent,onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},En({content:P(()=>[V(v,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:P(()=>[V(l,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:P(()=>[V(d,null,{default:P(()=>[F(e.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:P(()=>[V(E,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:P(()=>[F(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","persistent","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?(z(),te(I,{key:0},{default:P(()=>[V(m,me({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:P(()=>[F(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),V(m,me({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:P(()=>[V(f,{class:le(e.ns.e("icon"))},{default:P(()=>[V(a)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):Ne("v-if",!0)],2)}var Ot=H(St,[["render",$t],["__file","dropdown.vue"]]);const Nt=A({components:{ElRovingFocusCollectionItem:st},props:{focusable:{type:Boolean,default:!0},active:Boolean},emits:["mousedown","focus","keydown"],setup(e,{emit:n}){const{currentTabbedId:o,loop:t,onItemFocus:r,onItemShiftTab:p}=R(Le,void 0),{getItems:c}=R(Be,void 0),d=He(),l=C(),v=q(a=>{n("mousedown",a)},a=>{e.focusable?r(y(d)):a.preventDefault()}),E=q(a=>{n("focus",a)},()=>{r(y(d))}),b=q(a=>{n("keydown",a)},a=>{const{code:f,shiftKey:I,target:S,currentTarget:W}=a;if(f===w.tab&&I){p();return}if(S!==W)return;const $=ut(a);if($){a.preventDefault();let O=c().filter(G=>G.focusable).map(G=>G.ref);switch($){case"last":{O.reverse();break}case"prev":case"next":{$==="prev"&&O.reverse();const G=O.indexOf(W);O=t.value?ct(O,G+1):O.slice(G+1);break}}xe(()=>{Ae(O)})}}),m=_(()=>o.value===y(d));return ne(on,{rovingFocusGroupItemRef:l,tabIndex:_(()=>y(m)?0:-1),handleMousedown:v,handleFocus:E,handleKeydown:b}),{id:d,handleKeydown:b,handleFocus:E,handleMousedown:v}}});function kt(e,n,o,t,r,p){const c=K("el-roving-focus-collection-item");return z(),te(c,{id:e.id,focusable:e.focusable,active:e.active},{default:P(()=>[F(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var Pt=H(Nt,[["render",kt],["__file","roving-focus-item.vue"]]);const Rt=A({name:"DropdownItemImpl",components:{ElIcon:we},props:ln,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:n}){const o=j("dropdown"),{role:t}=R(Te,void 0),{collectionItemRef:r}=R(Mt,void 0),{collectionItemRef:p}=R(at,void 0),{rovingFocusGroupItemRef:c,tabIndex:d,handleFocus:l,handleKeydown:v,handleMousedown:E}=R(on,void 0),b=en(r,p,c),m=_(()=>t.value==="menu"?"menuitem":t.value==="navigation"?"link":"button"),a=q(f=>{if([w.enter,w.numpadEnter,w.space].includes(f.code))return f.preventDefault(),f.stopImmediatePropagation(),n("clickimpl",f),!0},v);return{ns:o,itemRef:b,dataset:{[nn]:""},role:m,tabIndex:d,handleFocus:l,handleKeydown:a,handleMousedown:E}}});function Ft(e,n,o,t,r,p){const c=K("el-icon");return z(),oe(Me,null,[e.divided?(z(),oe("li",{key:0,role:"separator",class:le(e.ns.bem("menu","item","divided"))},null,2)):Ne("v-if",!0),Ie("li",me({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:d=>e.$emit("clickimpl",d),onFocus:e.handleFocus,onKeydown:ke(e.handleKeydown,["self"]),onMousedown:e.handleMousedown,onPointermove:d=>e.$emit("pointermove",d),onPointerleave:d=>e.$emit("pointerleave",d)}),[e.icon?(z(),te(c,{key:0},{default:P(()=>[(z(),te(Mn(e.icon)))]),_:1})):Ne("v-if",!0),F(e.$slots,"default")],16,["aria-disabled","tabindex","role","onClick","onFocus","onKeydown","onMousedown","onPointermove","onPointerleave"])],64)}var Bt=H(Rt,[["render",Ft],["__file","dropdown-item-impl.vue"]]);const rn=()=>{const e=R(an,{}),n=_(()=>e==null?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:n}},Lt=A({name:"ElDropdownItem",components:{ElDropdownCollectionItem:yt,ElRovingFocusItem:Pt,ElDropdownItemImpl:Bt},inheritAttrs:!1,props:ln,emits:["pointermove","pointerleave","click"],setup(e,{emit:n,attrs:o}){const{elDropdown:t}=rn(),r=ve(),p=C(null),c=_(()=>{var a,f;return(f=(a=y(p))==null?void 0:a.textContent)!=null?f:""}),{onItemEnter:d,onItemLeave:l}=R(Te,void 0),v=q(a=>(n("pointermove",a),a.defaultPrevented),We(a=>{if(e.disabled){l(a);return}const f=a.currentTarget;f===document.activeElement||f.contains(document.activeElement)||(d(a),a.defaultPrevented||f==null||f.focus({preventScroll:!0}))})),E=q(a=>(n("pointerleave",a),a.defaultPrevented),We(l)),b=q(a=>{if(!e.disabled)return n("click",a),a.type!=="keydown"&&a.defaultPrevented},a=>{var f,I,S;if(e.disabled){a.stopImmediatePropagation();return}(f=t==null?void 0:t.hideOnClick)!=null&&f.value&&((I=t.handleClick)==null||I.call(t)),(S=t.commandHandler)==null||S.call(t,e.command,r,a)}),m=_(()=>({...e,...o}));return{handleClick:b,handlePointerMove:v,handlePointerLeave:E,textContent:c,propsAndAttrs:m}}});function At(e,n,o,t,r,p){var c;const d=K("el-dropdown-item-impl"),l=K("el-roving-focus-item"),v=K("el-dropdown-collection-item");return z(),te(v,{disabled:e.disabled,"text-value":(c=e.textValue)!=null?c:e.textContent},{default:P(()=>[V(l,{focusable:!e.disabled},{default:P(()=>[V(d,me(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:P(()=>[F(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var un=H(Lt,[["render",At],["__file","dropdown-item.vue"]]);const Dt=A({name:"ElDropdownMenu",props:It,setup(e){const n=j("dropdown"),{_elDropdownSize:o}=rn(),t=o.value,{focusTrapRef:r,onKeydown:p}=R(Vn,void 0),{contentRef:c,role:d,triggerId:l}=R(Te,void 0),{collectionRef:v,getItems:E}=R(wt,void 0),{rovingFocusGroupRef:b,rovingFocusGroupRootStyle:m,tabIndex:a,onBlur:f,onFocus:I,onMousedown:S}=R(Le,void 0),{collectionRef:W}=R(Be,void 0),$=_(()=>[n.b("menu"),n.bm("menu",t==null?void 0:t.value)]),U=en(c,v,r,b,W),O=q(M=>{var J;(J=e.onKeydown)==null||J.call(e,M)},M=>{const{currentTarget:J,code:D,target:B}=M;if(J.contains(B),w.tab===D&&M.stopImmediatePropagation(),M.preventDefault(),B!==y(c)||!Et.includes(D))return;const ee=E().filter(Q=>!Q.disabled).map(Q=>Q.ref);sn.includes(D)&&ee.reverse(),Ae(ee)});return{size:t,rovingFocusGroupRootStyle:m,tabIndex:a,dropdownKls:$,role:d,triggerId:l,dropdownListWrapperRef:U,handleKeydown:M=>{O(M),p(M)},onBlur:f,onFocus:I,onMousedown:S}}});function Kt(e,n,o,t,r,p){return z(),oe("ul",{ref:e.dropdownListWrapperRef,class:le(e.dropdownKls),style:Tn(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onBlur:e.onBlur,onFocus:e.onFocus,onKeydown:ke(e.handleKeydown,["self"]),onMousedown:ke(e.onMousedown,["self"])},[F(e.$slots,"default")],46,["role","aria-labelledby","onBlur","onFocus","onKeydown","onMousedown"])}var cn=H(Dt,[["render",Kt],["__file","dropdown-menu.vue"]]);const uo=qe(Ot,{DropdownItem:un,DropdownMenu:cn}),co=be(un),po=be(cn);let zt=class{constructor(n,o){this.parent=n,this.domNode=o,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(n){n===this.subMenuItems.length?n=0:n<0&&(n=this.subMenuItems.length-1),this.subMenuItems[n].focus(),this.subIndex=n}addListeners(){const n=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,o=>{o.addEventListener("keydown",t=>{let r=!1;switch(t.code){case w.down:{this.gotoSubIndex(this.subIndex+1),r=!0;break}case w.up:{this.gotoSubIndex(this.subIndex-1),r=!0;break}case w.tab:{ge(n,"mouseleave");break}case w.enter:case w.numpadEnter:case w.space:{r=!0,t.currentTarget.click();break}}return r&&(t.preventDefault(),t.stopPropagation()),!1})})}},Gt=class{constructor(n,o){this.domNode=n,this.submenu=null,this.submenu=null,this.init(o)}init(n){this.domNode.setAttribute("tabindex","0");const o=this.domNode.querySelector(`.${n}-menu`);o&&(this.submenu=new zt(this,o)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",n=>{let o=!1;switch(n.code){case w.down:{ge(n.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),o=!0;break}case w.up:{ge(n.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),o=!0;break}case w.tab:{ge(n.currentTarget,"mouseleave");break}case w.enter:case w.numpadEnter:case w.space:{o=!0,n.currentTarget.click();break}}o&&n.preventDefault()})}},Yt=class{constructor(n,o){this.domNode=n,this.init(o)}init(n){const o=this.domNode.childNodes;Array.from(o).forEach(t=>{t.nodeType===1&&new Gt(t,n)})}};const Wt=A({name:"ElMenuCollapseTransition"}),Ut=A({...Wt,setup(e){const n=j("menu"),o={onBeforeEnter:t=>t.style.opacity="0.2",onEnter(t,r){he(t,`${n.namespace.value}-opacity-transition`),t.style.opacity="1",r()},onAfterEnter(t){Se(t,`${n.namespace.value}-opacity-transition`),t.style.opacity=""},onBeforeLeave(t){t.dataset||(t.dataset={}),$n(t,n.m("collapse"))?(Se(t,n.m("collapse")),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth.toString(),he(t,n.m("collapse"))):(he(t,n.m("collapse")),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth.toString(),Se(t,n.m("collapse"))),t.style.width=`${t.scrollWidth}px`,t.style.overflow="hidden"},onLeave(t){he(t,"horizontal-collapse-transition"),t.style.width=`${t.dataset.scrollWidth}px`}};return(t,r)=>(z(),te(Sn,me({mode:"out-in"},y(o)),{default:P(()=>[F(t.$slots,"default")]),_:3},16))}});var Jt=H(Ut,[["__file","menu-collapse-transition.vue"]]);function dn(e,n){const o=_(()=>{let r=e.parent;const p=[n.value];for(;r.type.name!=="ElMenu";)r.props.index&&p.unshift(r.props.index),r=r.parent;return p});return{parentMenu:_(()=>{let r=e.parent;for(;r&&!["ElMenu","ElSubMenu"].includes(r.type.name);)r=r.parent;return r}),indexPath:o}}function Vt(e){return _(()=>{const o=e.backgroundColor;return o?new On(o).shade(20).toString():""})}const pn=(e,n)=>{const o=j("menu");return _(()=>o.cssVarBlock({"text-color":e.textColor||"","hover-text-color":e.textColor||"","bg-color":e.backgroundColor||"","hover-bg-color":Vt(e).value||"","active-color":e.activeTextColor||"",level:`${n}`}))},De="rootMenu",Ee="subMenu:",jt=ae({index:{type:String,required:!0},showTimeout:Number,hideTimeout:Number,popperClass:String,disabled:Boolean,teleported:{type:Boolean,default:void 0},popperOffset:Number,expandCloseIcon:{type:ie},expandOpenIcon:{type:ie},collapseCloseIcon:{type:ie},collapseOpenIcon:{type:ie}}),$e="ElSubMenu";var Ke=A({name:$e,props:jt,setup(e,{slots:n,expose:o}){const t=ve(),{indexPath:r,parentMenu:p}=dn(t,_(()=>e.index)),c=j("menu"),d=j("sub-menu"),l=R(De);l||_e($e,"can not inject root menu");const v=R(`${Ee}${p.value.uid}`);v||_e($e,"can not inject sub menu");const E=C({}),b=C({});let m;const a=C(!1),f=C(),I=C(),S=_(()=>D.value==="horizontal"&&$.value?"bottom-start":"right-start"),W=_(()=>D.value==="horizontal"&&$.value||D.value==="vertical"&&!l.props.collapse?e.expandCloseIcon&&e.expandOpenIcon?M.value?e.expandOpenIcon:e.expandCloseIcon:Ve:e.collapseCloseIcon&&e.collapseOpenIcon?M.value?e.collapseOpenIcon:e.collapseCloseIcon:Nn),$=_(()=>v.level===0),U=_(()=>{const u=e.teleported;return Qe(u)?$.value:u}),O=_(()=>l.props.collapse?`${c.namespace.value}-zoom-in-left`:`${c.namespace.value}-zoom-in-top`),G=_(()=>D.value==="horizontal"&&$.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","right","right-end","left-start","bottom-start","bottom-end","top-start","top-end"]),M=_(()=>l.openedMenus.includes(e.index)),J=_(()=>[...Object.values(E.value),...Object.values(b.value)].some(({active:u})=>u)),D=_(()=>l.props.mode),B=_(()=>l.props.persistent),X=Re({index:e.index,indexPath:r,active:J}),ee=pn(l.props,v.level+1),Q=_(()=>{var u;return(u=e.popperOffset)!=null?u:l.props.popperOffset}),se=_(()=>{var u;return(u=e.popperClass)!=null?u:l.props.popperClass}),re=_(()=>{var u;return(u=e.showTimeout)!=null?u:l.props.showTimeout}),pe=_(()=>{var u;return(u=e.hideTimeout)!=null?u:l.props.hideTimeout}),g=()=>{var u,k,N;return(N=(k=(u=I.value)==null?void 0:u.popperRef)==null?void 0:k.popperInstanceRef)==null?void 0:N.destroy()},s=u=>{u||g()},i=()=>{l.props.menuTrigger==="hover"&&l.props.mode==="horizontal"||l.props.collapse&&l.props.mode==="vertical"||e.disabled||l.handleSubMenuClick({index:e.index,indexPath:r.value,active:J.value})},h=(u,k=re.value)=>{var N;if(u.type!=="focus"){if(l.props.menuTrigger==="click"&&l.props.mode==="horizontal"||!l.props.collapse&&l.props.mode==="vertical"||e.disabled){v.mouseInChild.value=!0;return}v.mouseInChild.value=!0,m==null||m(),{stop:m}=ze(()=>{l.openMenu(e.index,r.value)},k),U.value&&((N=p.value.vnode.el)==null||N.dispatchEvent(new MouseEvent("mouseenter")))}},T=(u=!1)=>{var k;if(l.props.menuTrigger==="click"&&l.props.mode==="horizontal"||!l.props.collapse&&l.props.mode==="vertical"){v.mouseInChild.value=!1;return}m==null||m(),v.mouseInChild.value=!1,{stop:m}=ze(()=>!a.value&&l.closeMenu(e.index,r.value),pe.value),U.value&&u&&((k=v.handleMouseleave)==null||k.call(v,!0))};ce(()=>l.props.collapse,u=>s(!!u));{const u=N=>{b.value[N.index]=N},k=N=>{delete b.value[N.index]};ne(`${Ee}${t.uid}`,{addSubMenu:u,removeSubMenu:k,handleMouseleave:T,mouseInChild:a,level:v.level+1})}return o({opened:M}),Ce(()=>{l.addSubMenu(X),v.addSubMenu(X)}),ye(()=>{v.removeSubMenu(X),l.removeSubMenu(X)}),()=>{var u;const k=[(u=n.title)==null?void 0:u.call(n),L(we,{class:d.e("icon-arrow"),style:{transform:M.value?e.expandCloseIcon&&e.expandOpenIcon||e.collapseCloseIcon&&e.collapseOpenIcon&&l.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>de(W.value)?L(t.appContext.components[W.value]):L(W.value)})],N=l.isMenuPopup?L(Fe,{ref:I,visible:M.value,effect:"light",pure:!0,offset:Q.value,showArrow:!1,persistent:B.value,popperClass:se.value,placement:S.value,teleported:U.value,fallbackPlacements:G.value,transition:O.value,gpuAcceleration:!1},{content:()=>{var Z;return L("div",{class:[c.m(D.value),c.m("popup-container"),se.value],onMouseenter:x=>h(x,100),onMouseleave:()=>T(!0),onFocus:x=>h(x,100)},[L("ul",{class:[c.b(),c.m("popup"),c.m(`popup-${S.value}`)],style:ee.value},[(Z=n.default)==null?void 0:Z.call(n)])])},default:()=>L("div",{class:d.e("title"),onClick:i},k)}):L(Me,{},[L("div",{class:d.e("title"),ref:f,onClick:i},k),L(xn,{},{default:()=>{var Z;return Ze(L("ul",{role:"menu",class:[c.b(),c.m("inline")],style:ee.value},[(Z=n.default)==null?void 0:Z.call(n)]),[[kn,M.value]])}})]);return L("li",{class:[d.b(),d.is("active",J.value),d.is("opened",M.value),d.is("disabled",e.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:M.value,onMouseenter:h,onMouseleave:()=>T(),onFocus:h},[N])}}});const Ht=ae({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:Y(Array),default:()=>Ln([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,closeOnClickOutside:Boolean,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperOffset:{type:Number,default:6},ellipsisIcon:{type:ie,default:()=>Bn},popperEffect:{type:Y(String),default:"dark"},popperClass:String,showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},persistent:{type:Boolean,default:!0}}),Oe=e=>Xe(e)&&e.every(n=>de(n)),xt={close:(e,n)=>de(e)&&Oe(n),open:(e,n)=>de(e)&&Oe(n),select:(e,n,o,t)=>de(e)&&Oe(n)&&Pn(o)&&(Qe(t)||t instanceof Promise)};var qt=A({name:"ElMenu",props:Ht,emits:xt,setup(e,{emit:n,slots:o,expose:t}){const r=ve(),p=r.appContext.config.globalProperties.$router,c=C(),d=C(),l=j("menu"),v=j("sub-menu");let E=64;const b=C(-1),m=C(e.defaultOpeneds&&!e.collapse?e.defaultOpeneds.slice(0):[]),a=C(e.defaultActive),f=C({}),I=C({}),S=_(()=>e.mode==="horizontal"||e.mode==="vertical"&&e.collapse),W=()=>{const s=a.value&&f.value[a.value];if(!s||e.mode==="horizontal"||e.collapse)return;s.indexPath.forEach(h=>{const T=I.value[h];T&&$(h,T.indexPath)})},$=(s,i)=>{m.value.includes(s)||(e.uniqueOpened&&(m.value=m.value.filter(h=>i.includes(h))),m.value.push(s),n("open",s,i))},U=s=>{const i=m.value.indexOf(s);i!==-1&&m.value.splice(i,1)},O=(s,i)=>{U(s),n("close",s,i)},G=({index:s,indexPath:i})=>{m.value.includes(s)?O(s,i):$(s,i)},M=s=>{(e.mode==="horizontal"||e.collapse)&&(m.value=[]);const{index:i,indexPath:h}=s;if(!(Ge(i)||Ge(h)))if(e.router&&p){const T=s.route||i,u=p.push(T).then(k=>(k||(a.value=i),k));n("select",i,h,{index:i,indexPath:h,route:T},u)}else a.value=i,n("select",i,h,{index:i,indexPath:h})},J=s=>{var i;const h=f.value,T=h[s]||a.value&&h[a.value]||h[e.defaultActive];a.value=(i=T==null?void 0:T.index)!=null?i:s},D=s=>{const i=getComputedStyle(s),h=Number.parseInt(i.marginLeft,10),T=Number.parseInt(i.marginRight,10);return s.offsetWidth+h+T||0},B=()=>{var s,i;if(!c.value)return-1;const h=Array.from((i=(s=c.value)==null?void 0:s.childNodes)!=null?i:[]).filter(fe=>fe.nodeName!=="#text"||fe.nodeValue),T=getComputedStyle(c.value),u=Number.parseInt(T.paddingLeft,10),k=Number.parseInt(T.paddingRight,10),N=c.value.clientWidth-u-k;let Z=0,x=0;return h.forEach((fe,vn)=>{fe.nodeName!=="#comment"&&(Z+=D(fe),Z<=N-E&&(x=vn+1))}),x===h.length?-1:x},X=s=>I.value[s].indexPath,ee=(s,i=33.34)=>{let h;return()=>{h&&clearTimeout(h),h=setTimeout(()=>{s()},i)}};let Q=!0;const se=()=>{const s=Fn(d);if(s&&(E=D(s)||64),b.value===B())return;const i=()=>{b.value=-1,xe(()=>{b.value=B()})};Q?i():ee(i)(),Q=!1};ce(()=>e.defaultActive,s=>{f.value[s]||(a.value=""),J(s)}),ce(()=>e.collapse,s=>{s&&(m.value=[])}),ce(f.value,W);let re;Rn(()=>{e.mode==="horizontal"&&e.ellipsis?re=An(c,se).stop:re==null||re()});const pe=C(!1);{const s=u=>{I.value[u.index]=u},i=u=>{delete I.value[u.index]};ne(De,Re({props:e,openedMenus:m,items:f,subMenus:I,activeIndex:a,isMenuPopup:S,addMenuItem:u=>{f.value[u.index]=u},removeMenuItem:u=>{delete f.value[u.index]},addSubMenu:s,removeSubMenu:i,openMenu:$,closeMenu:O,handleMenuItemClick:M,handleSubMenuClick:G})),ne(`${Ee}${r.uid}`,{addSubMenu:s,removeSubMenu:i,mouseInChild:pe,level:0})}Ce(()=>{e.mode==="horizontal"&&new Yt(r.vnode.el,l.namespace.value)}),t({open:i=>{const{indexPath:h}=I.value[i];h.forEach(T=>$(T,h))},close:U,updateActiveIndex:J,handleResize:se});const g=pn(e,0);return()=>{var s,i;let h=(i=(s=o.default)==null?void 0:s.call(o))!=null?i:[];const T=[];if(e.mode==="horizontal"&&c.value){const N=qn(h),Z=b.value===-1?N:N.slice(0,b.value),x=b.value===-1?[]:N.slice(b.value);x!=null&&x.length&&e.ellipsis&&(h=Z,T.push(L(Ke,{ref:d,index:"sub-menu-more",class:v.e("hide-arrow"),popperOffset:e.popperOffset},{title:()=>L(we,{class:v.e("icon-more")},{default:()=>L(e.ellipsisIcon)}),default:()=>x})))}const u=e.closeOnClickOutside?[[jn,()=>{m.value.length&&(pe.value||(m.value.forEach(N=>n("close",N,X(N))),m.value=[]))}]]:[],k=Ze(L("ul",{key:String(e.collapse),role:"menubar",ref:c,style:g.value,class:{[l.b()]:!0,[l.m(e.mode)]:!0,[l.m("collapse")]:e.collapse}},[...h,...T]),u);return e.collapseTransition&&e.mode==="vertical"?L(Jt,()=>k):k}}});const Qt=ae({index:{type:Y([String,null]),default:null},route:{type:Y([String,Object])},disabled:Boolean}),Zt={click:e=>de(e.index)&&Xe(e.indexPath)},Pe="ElMenuItem",Xt=A({name:Pe}),eo=A({...Xt,props:Qt,emits:Zt,setup(e,{expose:n,emit:o}){const t=e;Dn(t.index)&&Kn();const r=ve(),p=R(De),c=j("menu"),d=j("menu-item");p||_e(Pe,"can not inject root menu");const{parentMenu:l,indexPath:v}=dn(r,ue(t,"index")),E=R(`${Ee}${l.value.uid}`);E||_e(Pe,"can not inject sub menu");const b=_(()=>t.index===p.activeIndex),m=Re({index:t.index,indexPath:v,active:b}),a=()=>{t.disabled||(p.handleMenuItemClick({index:t.index,indexPath:v.value,route:t.route}),o("click",m))};return Ce(()=>{E.addSubMenu(m),p.addMenuItem(m)}),ye(()=>{E.removeSubMenu(m),p.removeMenuItem(m)}),n({parentMenu:l,rootMenu:p,active:b,nsMenu:c,nsMenuItem:d,handleClick:a}),(f,I)=>(z(),oe("li",{class:le([y(d).b(),y(d).is("active",y(b)),y(d).is("disabled",f.disabled)]),role:"menuitem",tabindex:"-1",onClick:a},[y(l).type.name==="ElMenu"&&y(p).props.collapse&&f.$slots.title?(z(),te(y(Fe),{key:0,effect:y(p).props.popperEffect,placement:"right","fallback-placements":["left"],persistent:y(p).props.persistent},{content:P(()=>[F(f.$slots,"title")]),default:P(()=>[Ie("div",{class:le(y(c).be("tooltip","trigger"))},[F(f.$slots,"default")],2)]),_:3},8,["effect","persistent"])):(z(),oe(Me,{key:1},[F(f.$slots,"default"),F(f.$slots,"title")],64))],2))}});var fn=H(eo,[["__file","menu-item.vue"]]);const no={title:String},to=A({name:"ElMenuItemGroup"}),oo=A({...to,props:no,setup(e){const n=j("menu-item-group");return(o,t)=>(z(),oe("li",{class:le(y(n).b())},[Ie("div",{class:le(y(n).e("title"))},[o.$slots.title?F(o.$slots,"title",{key:1}):(z(),oe(Me,{key:0},[zn(Gn(o.title),1)],64))],2),Ie("ul",null,[F(o.$slots,"default")])],2))}});var mn=H(oo,[["__file","menu-item-group.vue"]]);const bo=qe(qt,{MenuItem:fn,MenuItemGroup:mn,SubMenu:Ke}),ho=be(fn),go=be(mn),Io=be(Ke);export{bo as E,uo as a,ho as b,Io as c,po as d,co as e,en as f,gt as g,go as h};
