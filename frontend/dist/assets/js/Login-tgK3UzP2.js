import{_ as Q,u as T,av as h,r as u,b as d,d as s,ag as p,J as E,P as C,e as v,az as U,G as m,H as B,aA as q,I as M,aB as D,w as O,f as G,M as V,aj as I,L as a,k as P,l as n,N as Z,O as j}from"./index-Da7ZqcH5.js";import{F as y}from"./ForestIcons-B2SAK2JE.js";const A={class:"login-page"},J={class:"form-content"},X={class:"input-section"},Y={class:"input-wrapper"},K={class:"input-icon"},ee={key:0,class:"error-message"},se={class:"input-wrapper"},te={class:"input-icon"},oe=["type"],re={key:0,class:"error-message"},le={class:"form-helpers"},ie={class:"remember-me"},ae={class:"firefly-container"},ne=["disabled"],de={key:0,class:"button-text forest-text"},ce={key:1,class:"button-loading"},ue={class:"register-link"},pe={__name:"Login",setup(fe){const b=P(),L=T(),i=h({usernameOrEmail:"",password:"",rememberMe:!1}),r=h({usernameOrEmail:"",password:""}),c=u(!1),f=u(!1),g=u(!1),w=u(!1),k=u(null),_=()=>{r.usernameOrEmail="",r.password="";let l=!0;return i.usernameOrEmail.trim()||(r.usernameOrEmail="请输入用户名或邮箱",l=!1),i.password.trim()?i.password.length<6&&(r.password="密码至少6位字符",l=!1):(r.password="请输入密码",l=!1),l},F=async()=>{var l,e;if(_()){c.value=!0;try{const t=await L.login({usernameOrEmail:i.usernameOrEmail,password:i.password});if(t.code===200){a.success("登录成功！欢迎回到字节森林");const o=b.currentRoute.value.query.redirect||"/";b.push(o)}else a.error(t.message||"登录失败")}catch(t){console.error("登录错误:",t),(e=(l=t.response)==null?void 0:l.data)!=null&&e.message?a.error(t.response.data.message):t.message?a.error(t.message):a.error("登录失败，请检查网络连接")}finally{c.value=!1}}},z=l=>{const e=l.currentTarget,t=k.value,o=e.getBoundingClientRect(),x=Math.max(o.width,o.height),$=l.clientX-o.left-x/2,H=l.clientY-o.top-x/2;t&&(t.style.width=t.style.height=x+"px",t.style.left=$+"px",t.style.top=H+"px",t.classList.add("active"),setTimeout(()=>{t.classList.remove("active")},600))},N=()=>{a.info("GitHub登录功能开发中...")},R=()=>{a.info("微信登录功能开发中...")},S=()=>{a.info("QQ登录功能开发中...")},W=()=>{a.info("手机登录功能开发中...")};return(l,e)=>{const t=G("router-link");return n(),d("div",A,[s("form",{onSubmit:I(F,["prevent"]),class:"login-form"},[s("div",J,[s("div",X,[s("div",{class:p(["input-group",{focused:g.value,error:r.usernameOrEmail}])},[s("div",Y,[s("div",K,[v(y,{name:"leaf",size:20,color:"#2E8B57"})]),C(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>i.usernameOrEmail=o),type:"text",placeholder:"用户名或邮箱",onFocus:e[1]||(e[1]=o=>g.value=!0),onBlur:e[2]||(e[2]=o=>g.value=!1),class:p({error:r.usernameOrEmail})},null,34),[[U,i.usernameOrEmail]]),e[8]||(e[8]=s("div",{class:"focus-line"},null,-1))]),r.usernameOrEmail?(n(),d("div",ee,[e[9]||(e[9]=s("div",{class:"error-icon"},"⚠",-1)),m(" "+B(r.usernameOrEmail),1)])):E("",!0)],2),s("div",{class:p(["input-group",{focused:w.value,error:r.password}])},[s("div",se,[s("div",te,[v(y,{name:"tree-lock",size:20,color:"#2E8B57"})]),C(s("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>i.password=o),type:f.value?"text":"password",placeholder:"密码",onFocus:e[4]||(e[4]=o=>w.value=!0),onBlur:e[5]||(e[5]=o=>w.value=!1),class:p({error:r.password})},null,42,oe),[[q,i.password]]),s("button",{type:"button",class:"password-toggle",onClick:e[6]||(e[6]=o=>f.value=!f.value)},[f.value?(n(),M(y,{key:1,name:"forest",size:20,color:"#2E8B57"})):(n(),M(y,{key:0,name:"sapling",size:20,color:"#2E8B57"}))]),e[10]||(e[10]=s("div",{class:"focus-line"},null,-1))]),r.password?(n(),d("div",re,[e[11]||(e[11]=s("div",{class:"error-icon"},"⚠",-1)),m(" "+B(r.password),1)])):E("",!0)],2)]),s("div",le,[s("label",ie,[C(s("input",{type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=o=>i.rememberMe=o)},null,512),[[D,i.rememberMe]]),e[12]||(e[12]=s("span",{class:"custom-checkbox"},null,-1)),e[13]||(e[13]=s("span",{class:"remember-text"},"记住我",-1))]),v(t,{to:"/auth/forgot-password",class:"forgot-password"},{default:O(()=>[e[14]||(e[14]=m(" 迷雾中迷路？ ",-1)),s("div",ae,[(n(),d(Z,null,j(3,o=>s("div",{class:"firefly",key:o})),64))])]),_:1,__:[14]})]),s("button",{type:"submit",class:p(["login-button",{loading:c.value}]),disabled:c.value,onClick:z},[c.value?(n(),d("div",ce,e[15]||(e[15]=[s("div",{class:"vine-loader"},null,-1),s("span",null,"登录中...",-1)]))):(n(),d("span",de,"登录字节森林")),s("div",{class:"button-ripple",ref_key:"rippleRef",ref:k},null,512)],10,ne),s("div",{class:"social-login"},[e[20]||(e[20]=s("div",{class:"divider"},[s("span",null,"或使用其他方式登录")],-1)),s("div",{class:"social-buttons"},[s("button",{type:"button",class:"social-button wechat",onClick:R},e[16]||(e[16]=[V('<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" data-v-dd419dc5><circle cx="10" cy="11" r="6" fill="currentColor" opacity="0.85" data-v-dd419dc5></circle><circle cx="8.5" cy="10" r="0.8" fill="#fff" data-v-dd419dc5></circle><circle cx="11.5" cy="10" r="0.8" fill="#fff" data-v-dd419dc5></circle><path d="M7 16 L8.2 14.5" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" data-v-dd419dc5></path><circle cx="16" cy="13" r="4.2" fill="currentColor" opacity="0.9" data-v-dd419dc5></circle><circle cx="15" cy="12.5" r="0.7" fill="#fff" data-v-dd419dc5></circle><circle cx="17" cy="12.5" r="0.7" fill="#fff" data-v-dd419dc5></circle><path d="M14.2 16.6 L15 15.4" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" data-v-dd419dc5></path></svg>',1)])),s("button",{type:"button",class:"social-button qq",onClick:S},e[17]||(e[17]=[V('<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" data-v-dd419dc5><circle cx="12" cy="7.5" r="3.2" fill="currentColor" data-v-dd419dc5></circle><ellipse cx="12" cy="13.5" rx="5" ry="4.8" fill="currentColor" data-v-dd419dc5></ellipse><ellipse cx="9.2" cy="13.2" rx="1.2" ry="2" fill="currentColor" opacity="0.8" data-v-dd419dc5></ellipse><ellipse cx="14.8" cy="13.2" rx="1.2" ry="2" fill="currentColor" opacity="0.8" data-v-dd419dc5></ellipse><ellipse cx="10.5" cy="18" rx="1.6" ry="0.8" fill="#fff" opacity="0.9" data-v-dd419dc5></ellipse><ellipse cx="13.5" cy="18" rx="1.6" ry="0.8" fill="#fff" opacity="0.9" data-v-dd419dc5></ellipse></svg>',1)])),s("button",{type:"button",class:"social-button phone",onClick:W},e[18]||(e[18]=[s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},[s("path",{d:"M17 2H7C5.895 2 5 2.895 5 4V20C5 21.105 5.895 22 7 22H17C18.105 22 19 21.105 19 20V4C19 2.895 18.105 2 17 2Z",stroke:"currentColor","stroke-width":"1.6"}),s("rect",{x:"9",y:"4.8",width:"6",height:"0.8",fill:"currentColor"}),s("circle",{cx:"12",cy:"19",r:"0.9",fill:"currentColor"})],-1)])),s("button",{type:"button",class:"social-button github",onClick:N},e[19]||(e[19]=[s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor"},[s("circle",{cx:"12",cy:"12",r:"9",fill:"currentColor",opacity:"0.15"}),s("path",{d:"M8.5 10 C8.5 7.8 10.2 6 12 6 C13.8 6 15.5 7.8 15.5 10 V12.2 C16.3 12.9 16.8 14 16.8 15.2 C16.8 17.4 14.8 18.5 12 18.5 C9.2 18.5 7.2 17.4 7.2 15.2 C7.2 14 7.7 12.9 8.5 12.2 V10 Z",fill:"currentColor"}),s("path",{d:"M10 7 L11.5 5.8 L12 6.4 L12.5 5.8 L14 7",stroke:"currentColor","stroke-width":"1.2",fill:"none","stroke-linecap":"round"})],-1)]))])]),s("div",ue,[e[22]||(e[22]=s("span",null,"还没有账户？",-1)),v(t,{to:"/auth/register",class:"register-vine"},{default:O(()=>e[21]||(e[21]=[m(" 加入森林 ",-1),s("div",{class:"vine-growth"},null,-1)])),_:1,__:[21]})])])],32)])}}},ye=Q(pe,[["__scopeId","data-v-dd419dc5"]]);export{ye as default};
