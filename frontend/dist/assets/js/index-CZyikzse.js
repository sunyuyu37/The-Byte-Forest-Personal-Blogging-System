import{cV as Be,bR as W,bL as ae,br as se,bk as M,dA as ne,cN as oe,cL as ie,bs as Ne,bt as b,c2 as Q,bl as G,aQ as D,cE as Oe,c5 as De,bm as K,cF as Ve,dE as X,c as O,r as z,bu as Ae,a4 as Y,o as _e,b as w,l as p,d as V,J as g,g as ce,h as e,ag as y,I as C,w as S,K as q,n as U,H,bx as R,e as N,dF as je,R as Ee,aj as _,aY as Ke,dq as de,bn as Z,ch as Ce,bA as Se,bS as Te,bJ as we,bB as $,cf as le,c4 as Me,N as qe,O as ze,B as He,aP as Ge,aK as Xe,dp as Je,e0 as Qe,eq as We,dm as Ye,aT as Ze,aS as re,cM as fe,er as xe,bQ as et,ei as tt,aX as at,bv as st,bp as nt,c3 as pe,bG as ve}from"./index-Da7ZqcH5.js";import{E as ot}from"./index-ViZWhRvA.js";import{h as it}from"./index-BJ8ssZSI.js";import{i as lt}from"./isEqual-HUGtL056.js";var rt=1,ut=4;function me(a){return it(a,rt|ut)}const ct=a=>["",...Be].includes(a),dt=M({modelValue:{type:[Boolean,String,Number],default:!1},disabled:Boolean,loading:Boolean,size:{type:String,validator:ct},width:{type:[String,Number],default:""},inlinePrompt:Boolean,inactiveActionIcon:{type:Q},activeActionIcon:{type:Q},activeIcon:{type:Q},inactiveIcon:{type:Q},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:b(Function)},id:String,tabindex:{type:[String,Number]},...Ne(["ariaLabel"])}),ft={[ie]:a=>W(a)||ae(a)||se(a),[oe]:a=>W(a)||ae(a)||se(a),[ne]:a=>W(a)||ae(a)||se(a)},Pe="ElSwitch",pt=D({name:Pe}),vt=D({...pt,props:dt,emits:ft,setup(a,{expose:c,emit:s}){const l=a,{formItem:d}=Oe(),v=De(),u=K("switch"),{inputId:F}=Ve(l,{formItemContext:d}),h=X(O(()=>l.loading)),k=z(l.modelValue!==!1),E=z(),m=z(),I=O(()=>[u.b(),u.m(v.value),u.is("disabled",h.value),u.is("checked",o.value)]),n=O(()=>[u.e("label"),u.em("label","left"),u.is("active",!o.value)]),r=O(()=>[u.e("label"),u.em("label","right"),u.is("active",o.value)]),t=O(()=>({width:Ae(l.width)}));Y(()=>l.modelValue,()=>{k.value=!0});const f=O(()=>k.value?l.modelValue:!1),o=O(()=>f.value===l.activeValue);[l.activeValue,l.inactiveValue].includes(f.value)||(s(ie,l.inactiveValue),s(oe,l.inactiveValue),s(ne,l.inactiveValue)),Y(o,i=>{var P;E.value.checked=i,l.validateEvent&&((P=d==null?void 0:d.validate)==null||P.call(d,"change").catch(A=>Ce()))});const T=()=>{const i=o.value?l.inactiveValue:l.activeValue;s(ie,i),s(oe,i),s(ne,i),Ke(()=>{E.value.checked=o.value})},L=()=>{if(h.value)return;const{beforeChange:i}=l;if(!i){T();return}const P=i();[de(P),W(P)].includes(!0)||Z(Pe,"beforeChange must return type `Promise<boolean>` or `boolean`"),de(P)?P.then(J=>{J&&T()}).catch(J=>{}):P&&T()},B=()=>{var i,P;(P=(i=E.value)==null?void 0:i.focus)==null||P.call(i)};return _e(()=>{E.value.checked=o.value}),c({focus:B,checked:o}),(i,P)=>(p(),w("div",{class:y(e(I)),onClick:_(L,["prevent"])},[V("input",{id:e(F),ref_key:"input",ref:E,class:y(e(u).e("input")),type:"checkbox",role:"switch","aria-checked":e(o),"aria-disabled":e(h),"aria-label":i.ariaLabel,name:i.name,"true-value":i.activeValue,"false-value":i.inactiveValue,disabled:e(h),tabindex:i.tabindex,onChange:T,onKeydown:ce(L,["enter"])},null,42,["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"]),!i.inlinePrompt&&(i.inactiveIcon||i.inactiveText)?(p(),w("span",{key:0,class:y(e(n))},[i.inactiveIcon?(p(),C(e(U),{key:0},{default:S(()=>[(p(),C(q(i.inactiveIcon)))]),_:1})):g("v-if",!0),!i.inactiveIcon&&i.inactiveText?(p(),w("span",{key:1,"aria-hidden":e(o)},H(i.inactiveText),9,["aria-hidden"])):g("v-if",!0)],2)):g("v-if",!0),V("span",{ref_key:"core",ref:m,class:y(e(u).e("core")),style:Ee(e(t))},[i.inlinePrompt?(p(),w("div",{key:0,class:y(e(u).e("inner"))},[i.activeIcon||i.inactiveIcon?(p(),C(e(U),{key:0,class:y(e(u).is("icon"))},{default:S(()=>[(p(),C(q(e(o)?i.activeIcon:i.inactiveIcon)))]),_:1},8,["class"])):i.activeText||i.inactiveText?(p(),w("span",{key:1,class:y(e(u).is("text")),"aria-hidden":!e(o)},H(e(o)?i.activeText:i.inactiveText),11,["aria-hidden"])):g("v-if",!0)],2)):g("v-if",!0),V("div",{class:y(e(u).e("action"))},[i.loading?(p(),C(e(U),{key:0,class:y(e(u).is("loading"))},{default:S(()=>[N(e(je))]),_:1},8,["class"])):e(o)?R(i.$slots,"active-action",{key:1},()=>[i.activeActionIcon?(p(),C(e(U),{key:0},{default:S(()=>[(p(),C(q(i.activeActionIcon)))]),_:1})):g("v-if",!0)]):e(o)?g("v-if",!0):R(i.$slots,"inactive-action",{key:2},()=>[i.inactiveActionIcon?(p(),C(e(U),{key:0},{default:S(()=>[(p(),C(q(i.inactiveActionIcon)))]),_:1})):g("v-if",!0)])],2)],6),!i.inlinePrompt&&(i.activeIcon||i.activeText)?(p(),w("span",{key:1,class:y(e(r))},[i.activeIcon?(p(),C(e(U),{key:0},{default:S(()=>[(p(),C(q(i.activeIcon)))]),_:1})):g("v-if",!0),!i.activeIcon&&i.activeText?(p(),w("span",{key:1,"aria-hidden":!e(o)},H(i.activeText),9,["aria-hidden"])):g("v-if",!0)],2)):g("v-if",!0)],10,["onClick"]))}});var mt=G(vt,[["__file","switch.vue"]]);const Mt=Se(mt),$e=Symbol("uploadContextKey"),yt="ElUpload";class gt extends Error{constructor(c,s,l,d){super(c),this.name="UploadAjaxError",this.status=s,this.method=l,this.url=d}}function ye(a,c,s){let l;return s.response?l=`${s.response.error||s.response}`:s.responseText?l=`${s.responseText}`:l=`fail to ${c.method} ${a} ${s.status}`,new gt(l,s.status,c.method,a)}function bt(a){const c=a.responseText||a.response;if(!c)return c;try{return JSON.parse(c)}catch{return c}}const ht=a=>{typeof XMLHttpRequest>"u"&&Z(yt,"XMLHttpRequest is undefined");const c=new XMLHttpRequest,s=a.action;c.upload&&c.upload.addEventListener("progress",v=>{const u=v;u.percent=v.total>0?v.loaded/v.total*100:0,a.onProgress(u)});const l=new FormData;if(a.data)for(const[v,u]of Object.entries(a.data))Te(u)&&u.length?l.append(v,...u):l.append(v,u);l.append(a.filename,a.file,a.file.name),c.addEventListener("error",()=>{a.onError(ye(s,a,c))}),c.addEventListener("load",()=>{if(c.status<200||c.status>=300)return a.onError(ye(s,a,c));a.onSuccess(bt(c))}),c.open(a.method,s,!0),a.withCredentials&&"withCredentials"in c&&(c.withCredentials=!0);const d=a.headers||{};if(d instanceof Headers)d.forEach((v,u)=>c.setRequestHeader(u,v));else for(const[v,u]of Object.entries(d))we(u)||c.setRequestHeader(v,String(u));return c.send(l),c},Fe=["text","picture","picture-card"];let kt=1;const ue=()=>Date.now()+kt++,Re=M({action:{type:String,default:"#"},headers:{type:b(Object)},method:{type:String,default:"post"},data:{type:b([Object,Function,Promise]),default:()=>le({})},multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:b(Array),default:()=>le([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:Fe,default:"text"},httpRequest:{type:b(Function),default:ht},disabled:Boolean,limit:Number}),Et=M({...Re,beforeUpload:{type:b(Function),default:$},beforeRemove:{type:b(Function)},onRemove:{type:b(Function),default:$},onChange:{type:b(Function),default:$},onPreview:{type:b(Function),default:$},onSuccess:{type:b(Function),default:$},onProgress:{type:b(Function),default:$},onError:{type:b(Function),default:$},onExceed:{type:b(Function),default:$},crossorigin:{type:b(String)}}),Ct=M({files:{type:b(Array),default:()=>le([])},disabled:Boolean,handlePreview:{type:b(Function),default:$},listType:{type:String,values:Fe,default:"text"},crossorigin:{type:b(String)}}),St={remove:a=>!!a},Tt=D({name:"ElUploadList"}),wt=D({...Tt,props:Ct,emits:St,setup(a,{emit:c}){const s=a,{t:l}=Me(),d=K("upload"),v=K("icon"),u=K("list"),F=X(),h=z(!1),k=O(()=>[d.b("list"),d.bm("list",s.listType),d.is("disabled",s.disabled)]),E=m=>{c("remove",m)};return(m,I)=>(p(),C(Ye,{tag:"ul",class:y(e(k)),name:e(u).b()},{default:S(()=>[(p(!0),w(qe,null,ze(m.files,(n,r)=>(p(),w("li",{key:n.uid||n.name,class:y([e(d).be("list","item"),e(d).is(n.status),{focusing:h.value}]),tabindex:"0",onKeydown:ce(t=>!e(F)&&E(n),["delete"]),onFocus:t=>h.value=!0,onBlur:t=>h.value=!1,onClick:t=>h.value=!1},[R(m.$slots,"default",{file:n,index:r},()=>[m.listType==="picture"||n.status!=="uploading"&&m.listType==="picture-card"?(p(),w("img",{key:0,class:y(e(d).be("list","item-thumbnail")),src:n.url,crossorigin:m.crossorigin,alt:""},null,10,["src","crossorigin"])):g("v-if",!0),n.status==="uploading"||m.listType!=="picture-card"?(p(),w("div",{key:1,class:y(e(d).be("list","item-info"))},[V("a",{class:y(e(d).be("list","item-name")),onClick:_(t=>m.handlePreview(n),["prevent"])},[N(e(U),{class:y(e(v).m("document"))},{default:S(()=>[N(e(He))]),_:1},8,["class"]),V("span",{class:y(e(d).be("list","item-file-name")),title:n.name},H(n.name),11,["title"])],10,["onClick"]),n.status==="uploading"?(p(),C(e(ot),{key:0,type:m.listType==="picture-card"?"circle":"line","stroke-width":m.listType==="picture-card"?6:2,percentage:Number(n.percentage),style:Ee(m.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):g("v-if",!0)],2)):g("v-if",!0),V("label",{class:y(e(d).be("list","item-status-label"))},[m.listType==="text"?(p(),C(e(U),{key:0,class:y([e(v).m("upload-success"),e(v).m("circle-check")])},{default:S(()=>[N(e(Ge))]),_:1},8,["class"])):["picture-card","picture"].includes(m.listType)?(p(),C(e(U),{key:1,class:y([e(v).m("upload-success"),e(v).m("check")])},{default:S(()=>[N(e(Xe))]),_:1},8,["class"])):g("v-if",!0)],2),e(F)?g("v-if",!0):(p(),C(e(U),{key:2,class:y(e(v).m("close")),onClick:t=>E(n)},{default:S(()=>[N(e(Je))]),_:2},1032,["class","onClick"])),g(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),g(" This is a bug which needs to be fixed "),g(" TODO: Fix the incorrect navigation interaction "),e(F)?g("v-if",!0):(p(),w("i",{key:3,class:y(e(v).m("close-tip"))},H(e(l)("el.upload.deleteTip")),3)),m.listType==="picture-card"?(p(),w("span",{key:4,class:y(e(d).be("list","item-actions"))},[V("span",{class:y(e(d).be("list","item-preview")),onClick:t=>m.handlePreview(n)},[N(e(U),{class:y(e(v).m("zoom-in"))},{default:S(()=>[N(e(Qe))]),_:1},8,["class"])],10,["onClick"]),e(F)?g("v-if",!0):(p(),w("span",{key:0,class:y(e(d).be("list","item-delete")),onClick:t=>E(n)},[N(e(U),{class:y(e(v).m("delete"))},{default:S(()=>[N(e(We))]),_:1},8,["class"])],10,["onClick"]))],2)):g("v-if",!0)])],42,["onKeydown","onFocus","onBlur","onClick"]))),128)),R(m.$slots,"append")]),_:3},8,["class","name"]))}});var ge=G(wt,[["__file","upload-list.vue"]]);const Pt=M({disabled:Boolean}),$t={file:a=>Te(a)},Le="ElUploadDrag",Ft=D({name:Le}),Rt=D({...Ft,props:Pt,emits:$t,setup(a,{emit:c}){Ze($e)||Z(Le,"usage: <el-upload><el-upload-dragger /></el-upload>");const l=K("upload"),d=z(!1),v=X(),u=k=>{if(v.value)return;d.value=!1,k.stopPropagation();const E=Array.from(k.dataTransfer.files),m=k.dataTransfer.items||[];E.forEach((I,n)=>{var r;const t=m[n],f=(r=t==null?void 0:t.webkitGetAsEntry)==null?void 0:r.call(t);f&&(I.isDirectory=f.isDirectory)}),c("file",E)},F=()=>{v.value||(d.value=!0)},h=k=>{k.currentTarget.contains(k.relatedTarget)||(d.value=!1)};return(k,E)=>(p(),w("div",{class:y([e(l).b("dragger"),e(l).is("dragover",d.value)]),onDrop:_(u,["prevent"]),onDragover:_(F,["prevent"]),onDragleave:_(h,["prevent"])},[R(k.$slots,"default")],42,["onDrop","onDragover","onDragleave"]))}});var Lt=G(Rt,[["__file","upload-dragger.vue"]]);const Ut=M({...Re,beforeUpload:{type:b(Function),default:$},onRemove:{type:b(Function),default:$},onStart:{type:b(Function),default:$},onSuccess:{type:b(Function),default:$},onProgress:{type:b(Function),default:$},onError:{type:b(Function),default:$},onExceed:{type:b(Function),default:$}}),It=D({name:"ElUploadContent",inheritAttrs:!1}),Bt=D({...It,props:Ut,setup(a,{expose:c}){const s=a,l=K("upload"),d=X(),v=re({}),u=re(),F=t=>{if(t.length===0)return;const{autoUpload:f,limit:o,fileList:T,multiple:L,onStart:B,onExceed:i}=s;if(o&&T.length+t.length>o){i(t,T);return}L||(t=t.slice(0,1));for(const P of t){const A=P;A.uid=ue(),B(A),f&&h(A)}},h=async t=>{if(u.value.value="",!s.beforeUpload)return E(t);let f,o={};try{const L=s.data,B=s.beforeUpload(t);o=fe(s.data)?me(s.data):s.data,f=await B,fe(s.data)&&lt(L,o)&&(o=me(s.data))}catch{f=!1}if(f===!1){s.onRemove(t);return}let T=t;f instanceof Blob&&(f instanceof File?T=f:T=new File([f],t.name,{type:t.type})),E(Object.assign(T,{uid:t.uid}),o)},k=async(t,f)=>et(t)?t(f):t,E=async(t,f)=>{const{headers:o,data:T,method:L,withCredentials:B,name:i,action:P,onProgress:A,onSuccess:J,onError:Ue,httpRequest:Ie}=s;try{f=await k(f??T,t)}catch{s.onRemove(t);return}const{uid:x}=t,ee={headers:o||{},withCredentials:B,file:t,data:f,method:L,filename:i,action:P,onProgress:j=>{A(j,t)},onSuccess:j=>{J(j,t),delete v.value[x]},onError:j=>{Ue(j,t),delete v.value[x]}},te=Ie(ee);v.value[x]=te,te instanceof Promise&&te.then(ee.onSuccess,ee.onError)},m=t=>{const f=t.target.files;f&&F(Array.from(f))},I=()=>{d.value||(u.value.value="",u.value.click())},n=()=>{I()};return c({abort:t=>{xe(v.value).filter(t?([o])=>String(t.uid)===o:()=>!0).forEach(([o,T])=>{T instanceof XMLHttpRequest&&T.abort(),delete v.value[o]})},upload:h}),(t,f)=>(p(),w("div",{class:y([e(l).b(),e(l).m(t.listType),e(l).is("drag",t.drag),e(l).is("disabled",e(d))]),tabindex:e(d)?"-1":"0",onClick:I,onKeydown:ce(_(n,["self"]),["enter","space"])},[t.drag?(p(),C(Lt,{key:0,disabled:e(d),onFile:F},{default:S(()=>[R(t.$slots,"default")]),_:3},8,["disabled"])):R(t.$slots,"default",{key:1}),V("input",{ref_key:"inputRef",ref:u,class:y(e(l).e("input")),name:t.name,disabled:e(d),multiple:t.multiple,accept:t.accept,type:"file",onChange:m,onClick:_(()=>{},["stop"])},null,42,["name","disabled","multiple","accept","onClick"])],42,["tabindex","onKeydown"]))}});var be=G(Bt,[["__file","upload-content.vue"]]);const he="ElUpload",ke=a=>{var c;(c=a.url)!=null&&c.startsWith("blob:")&&URL.revokeObjectURL(a.url)},Nt=(a,c)=>{const s=tt(a,"fileList",void 0,{passive:!0}),l=n=>s.value.find(r=>r.uid===n.uid);function d(n){var r;(r=c.value)==null||r.abort(n)}function v(n=["ready","uploading","success","fail"]){s.value=s.value.filter(r=>!n.includes(r.status))}function u(n){s.value=s.value.filter(r=>r.uid!==n.uid)}const F=(n,r)=>{const t=l(r);t&&(console.error(n),t.status="fail",u(t),a.onError(n,t,s.value),a.onChange(t,s.value))},h=(n,r)=>{const t=l(r);t&&(a.onProgress(n,t,s.value),t.status="uploading",t.percentage=Math.round(n.percent))},k=(n,r)=>{const t=l(r);t&&(t.status="success",t.response=n,a.onSuccess(n,t,s.value),a.onChange(t,s.value))},E=n=>{we(n.uid)&&(n.uid=ue());const r={name:n.name,percentage:0,status:"ready",size:n.size,raw:n,uid:n.uid};if(a.listType==="picture-card"||a.listType==="picture")try{r.url=URL.createObjectURL(n)}catch(t){Ce(he,t.message),a.onError(t,r,s.value)}s.value=[...s.value,r],a.onChange(r,s.value)},m=async n=>{const r=n instanceof File?l(n):n;r||Z(he,"file to be removed not found");const t=f=>{d(f),u(f),a.onRemove(f,s.value),ke(f)};a.beforeRemove?await a.beforeRemove(r,s.value)!==!1&&t(r):t(r)};function I(){s.value.filter(({status:n})=>n==="ready").forEach(({raw:n})=>{var r;return n&&((r=c.value)==null?void 0:r.upload(n))})}return Y(()=>a.listType,n=>{n!=="picture-card"&&n!=="picture"||(s.value=s.value.map(r=>{const{raw:t,url:f}=r;if(!f&&t)try{r.url=URL.createObjectURL(t)}catch(o){a.onError(o,r,s.value)}return r}))}),Y(s,n=>{for(const r of n)r.uid||(r.uid=ue()),r.status||(r.status="success")},{immediate:!0,deep:!0}),{uploadFiles:s,abort:d,clearFiles:v,handleError:F,handleProgress:h,handleStart:E,handleSuccess:k,handleRemove:m,submit:I,revokeFileObjectURL:ke}},Ot=D({name:"ElUpload"}),Dt=D({...Ot,props:Et,setup(a,{expose:c}){const s=a,l=X(),d=re(),{abort:v,submit:u,clearFiles:F,uploadFiles:h,handleStart:k,handleError:E,handleRemove:m,handleSuccess:I,handleProgress:n,revokeFileObjectURL:r}=Nt(s,d),t=O(()=>s.listType==="picture-card"),f=O(()=>({...s,fileList:h.value,onStart:k,onProgress:n,onSuccess:I,onError:E,onRemove:m}));return at(()=>{h.value.forEach(r)}),st($e,{accept:nt(s,"accept")}),c({abort:v,submit:u,clearFiles:F,handleStart:k,handleRemove:m}),(o,T)=>(p(),w("div",null,[e(t)&&o.showFileList?(p(),C(ge,{key:0,disabled:e(l),"list-type":o.listType,files:e(h),crossorigin:o.crossorigin,"handle-preview":o.onPreview,onRemove:e(m)},pe({append:S(()=>[N(be,ve({ref_key:"uploadRef",ref:d},e(f)),{default:S(()=>[o.$slots.trigger?R(o.$slots,"trigger",{key:0}):g("v-if",!0),!o.$slots.trigger&&o.$slots.default?R(o.$slots,"default",{key:1}):g("v-if",!0)]),_:3},16)]),_:2},[o.$slots.file?{name:"default",fn:S(({file:L,index:B})=>[R(o.$slots,"file",{file:L,index:B})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):g("v-if",!0),!e(t)||e(t)&&!o.showFileList?(p(),C(be,ve({key:1,ref_key:"uploadRef",ref:d},e(f)),{default:S(()=>[o.$slots.trigger?R(o.$slots,"trigger",{key:0}):g("v-if",!0),!o.$slots.trigger&&o.$slots.default?R(o.$slots,"default",{key:1}):g("v-if",!0)]),_:3},16)):g("v-if",!0),o.$slots.trigger?R(o.$slots,"default",{key:2}):g("v-if",!0),R(o.$slots,"tip"),!e(t)&&o.showFileList?(p(),C(ge,{key:3,disabled:e(l),"list-type":o.listType,files:e(h),crossorigin:o.crossorigin,"handle-preview":o.onPreview,onRemove:e(m)},pe({_:2},[o.$slots.file?{name:"default",fn:S(({file:L,index:B})=>[R(o.$slots,"file",{file:L,index:B})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):g("v-if",!0)]))}});var Vt=G(Dt,[["__file","upload.vue"]]);const qt=Se(Vt);export{qt as E,Mt as a,me as c,ct as i};
