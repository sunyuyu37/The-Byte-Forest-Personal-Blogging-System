/* empty css             *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                 *//* empty css                         *//* empty css                           */import{r as a,b as e,w as l,p as t,c as s,a as u,Q as i,I as r,K as o,O as c,M as n,P as v,a6 as d,aD as p,o as m,H as g,u as y}from"./vue-B9wWIsxR.js";import{a7 as f,e as k,r as _,a0 as j,h,a1 as C,ab as b,C as w,a2 as z,a6 as A}from"./element-plus-CXASJE3V.js";import{A as x}from"./ArticleCard-0C1cmhuZ.js";import{g as $}from"./tag-CcNM5ZPy.js";import{a as T}from"./article-Pn5uYJFo.js";import{_ as U}from"./_plugin-vue_export-helper-BCo6x5W8.js";/* empty css                  */import"./placeholder-Cbo4Yzwr.js";import"./index-di9GIa25.js";import"./utils-C28rWPR3.js";const V={class:"tag-page"},B={class:"container"},E={class:"page-header"},I={class:"breadcrumb"},O={key:0,class:"tag-info"},P={class:"title"},D={key:0,class:"description"},H={class:"stats"},K={class:"stat-item"},M={key:1,class:"all-tags"},Q={key:0,class:"tags-section"},R={class:"tags-cloud"},Y={class:"popular-tags"},q={class:"popular-tags-list"},F=["onClick"],G={class:"tag-name"},J={class:"tag-stats"},L={key:1,class:"articles-section"},N={class:"filters"},S={class:"filter-group"},W={key:0,class:"loading"},X={key:1,class:"articles-list"},Z={key:2,class:"empty-state"},aa={key:3,class:"pagination"},ea=U({__name:"Tag",setup(U){const ea=p(),la=a(!1),ta=a([]),sa=a(null),ua=a([]),ia=a(1),ra=a(12),oa=a(0),ca=a("latest"),na=e(()=>[...ta.value].sort((a,e)=>e.articleCount-a.articleCount).slice(0,8)),va=a=>a>=20?"danger":a>=10?"warning":a>=5?"success":"info",da=async()=>{try{const a=await $();200===a.code&&Array.isArray(a.data)?ta.value=a.data:ta.value=[]}catch(a){ta.value=[]}},pa=async()=>{var a;if(sa.value){la.value=!0;try{const a={page:ia.value-1,size:ra.value},e=await T.getArticlesByTag(sa.value.slug,a);200===e.code&&e.data?(ua.value=e.data.content||[],oa.value=e.data.totalElements||0):(ua.value=[],oa.value=0)}catch(e){if(404===(null==(a=null==e?void 0:e.response)?void 0:a.status))try{const a={keyword:"",tag:sa.value.slug,page:ia.value-1,size:ra.value,sortBy:"popular"===ca.value?"views":"liked"===ca.value?"likes":"latest"},e=await T.searchArticles(a);200===e.code&&e.data?(ua.value=e.data.content||[],oa.value=e.data.totalElements||0):(ua.value=[],oa.value=0)}catch(l){ua.value=[],oa.value=0}else ua.value=[],oa.value=0}finally{la.value=!1}}},ma=a=>{ia.value=a,pa()};return l(()=>ea.params.slug,async a=>{ia.value=1,await(async a=>{try{ta.value.length||await da();const e=ta.value.find(e=>e.slug===a);sa.value=e||null}catch(e){sa.value=null}})(a),sa.value?await pa():await da()},{immediate:!0}),t(()=>{}),(a,e)=>{const l=b,t=f,p=k,$=_,T=z,U=j,ea=A,da=h,ga=C;return m(),s("div",V,[u("div",B,[u("div",E,[u("div",I,[i(t,{separator:"/"},{default:r(()=>[i(l,{to:"/"},{default:r(()=>e[2]||(e[2]=[n("首页",-1)])),_:1,__:[2]}),i(l,null,{default:r(()=>e[3]||(e[3]=[n("标签",-1)])),_:1,__:[3]}),sa.value?(m(),g(l,{key:0},{default:r(()=>[n(c(sa.value.name),1)]),_:1})):o("",!0)]),_:1})]),sa.value?(m(),s("div",O,[u("h1",P,[i(p,{type:va(sa.value.articleCount),size:"large"},{default:r(()=>[n(c(sa.value.name),1)]),_:1},8,["type"])]),sa.value.description?(m(),s("p",D,c(sa.value.description),1)):o("",!0),u("div",H,[u("span",K,[i($,null,{default:r(()=>[i(y(w))]),_:1}),n(" "+c(sa.value.articleCount)+" 篇文章 ",1)])])])):(m(),s("div",M,e[4]||(e[4]=[u("h1",{class:"title"},"文章标签",-1),u("p",{class:"description"},"浏览所有文章标签",-1)])))]),sa.value?(m(),s("div",L,[u("div",N,[u("div",S,[e[6]||(e[6]=u("label",null,"排序方式：",-1)),i(U,{modelValue:ca.value,"onUpdate:modelValue":e[0]||(e[0]=a=>ca.value=a),onChange:pa},{default:r(()=>[i(T,{label:"最新发布",value:"latest"}),i(T,{label:"最多阅读",value:"popular"}),i(T,{label:"最多点赞",value:"liked"})]),_:1},8,["modelValue"])])]),la.value?(m(),s("div",W,[(m(),s(v,null,d(6,a=>i(ea,{key:a,rows:3,animated:""})),64))])):ua.value.length?(m(),s("div",X,[(m(!0),s(v,null,d(ua.value,a=>(m(),g(x,{key:a.id,article:a},null,8,["article"]))),128))])):(m(),s("div",Z,[i(da,{description:"该标签下暂无文章"})])),oa.value>ra.value?(m(),s("div",aa,[i(ga,{"current-page":ia.value,"onUpdate:currentPage":e[1]||(e[1]=a=>ia.value=a),"page-size":ra.value,total:oa.value,layout:"prev, pager, next, jumper",onCurrentChange:ma},null,8,["current-page","page-size","total"])])):o("",!0)])):(m(),s("div",Q,[u("div",R,[(m(!0),s(v,null,d(ta.value,e=>{return m(),g(p,{key:e.id,type:va(e.articleCount),size:(l=e.articleCount,l>=20?"large":l>=10?"default":"small"),class:"tag-item",onClick:l=>a.$router.push(`/tag/${e.slug}`)},{default:r(()=>[n(c(e.name)+" ("+c(e.articleCount)+") ",1)]),_:2},1032,["type","size","onClick"]);var l}),128))]),u("div",Y,[e[5]||(e[5]=u("h3",null,"热门标签",-1)),u("div",q,[(m(!0),s(v,null,d(na.value,e=>(m(),s("div",{key:e.id,class:"popular-tag-card",onClick:l=>a.$router.push(`/tag/${e.slug}`)},[u("div",G,[i(p,{type:va(e.articleCount)},{default:r(()=>[n(c(e.name),1)]),_:2},1032,["type"])]),u("div",J,c(e.articleCount)+" 篇文章 ",1)],8,F))),128))])])]))])])}}},[["__scopeId","data-v-482c239d"]]);export{ea as default};
