/* empty css             *//* empty css                   *//* empty css                 *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                 */import{r as e,w as a,p as l,aD as s,c as t,a as r,J as u,Q as i,a4 as o,u as v,I as c,K as n,P as p,a6 as d,ay as m,o as g,H as y}from"./vue-B9wWIsxR.js";import{s as h,m as j,a0 as f,J as b,a1 as w,h as k,E as _,a2 as A}from"./element-plus-CXASJE3V.js";import{A as V}from"./ArticleCard-0C1cmhuZ.js";import{a as C}from"./article-Pn5uYJFo.js";import{c as x}from"./category-PKu3E1eX.js";import{_ as z}from"./_plugin-vue_export-helper-BCo6x5W8.js";/* empty css                  */import"./placeholder-Cbo4Yzwr.js";import"./index-di9GIa25.js";import"./utils-C28rWPR3.js";const U={class:"articles-page"},B={class:"container"},D={class:"filters"},P={class:"search-box"},q={class:"filter-options"},E={class:"articles-content"},I={class:"articles-grid"},J={key:0,class:"pagination"},K={key:1,class:"empty-state"},S=z({__name:"Articles",setup(z){const S=s();m();const H=e(!1),O=e([]),Q=e([]),R=e(0),T=e(1),Y=e(12),F=e(""),G=e(""),L=e("latest"),M=async()=>{H.value=!0;try{const e="latest"===L.value?"publishedAt":"views"===L.value?"viewCount":"likes"===L.value?"likeCount":"publishedAt",a={page:T.value-1,size:Y.value,sortBy:e,sortDir:"desc"};let l;if(F.value.trim()?(a.keyword=F.value.trim(),a.sortBy=N(L.value),G.value&&(a.category=G.value),l=await C.searchArticles(a)):G.value?(delete a.sortBy,delete a.sortDir,l=await C.getArticlesByCategory(G.value,a)):l=await C.getPublishedArticles(a),l&&l.data){const e=l.data;O.value=e.content||[],R.value=e.totalElements||0}else O.value=[],R.value=0}catch(e){_.error("加载文章失败，请稍后重试"),O.value=[],R.value=0}finally{H.value=!1}},N=e=>{switch(e){case"latest":return"latest";case"views":return"views";case"likes":return"likes";default:return"relevance"}},W=()=>{T.value=1,M()},X=e=>{Y.value=e,T.value=1,M()},Z=e=>{T.value=e,M()};return a([G,L],()=>{T.value=1,M()}),l(()=>{S.query.search&&(F.value=S.query.search),(async()=>{try{const e=await x.getAllCategories();e&&e.data&&(Q.value=e.data)}catch(e){_.error("加载分类失败")}})(),M()}),(e,a)=>{const l=j,s=A,m=f,_=w,C=k,x=b;return g(),t("div",U,[r("div",B,[a[5]||(a[5]=r("div",{class:"page-header"},[r("h1",null,"文章列表"),r("p",null,"探索精彩内容，发现有趣观点")],-1)),r("div",D,[r("div",P,[i(l,{modelValue:F.value,"onUpdate:modelValue":a[0]||(a[0]=e=>F.value=e),placeholder:"搜索文章...","prefix-icon":v(h),onKeyup:o(W,["enter"]),clearable:""},null,8,["modelValue","prefix-icon"])]),r("div",q,[i(m,{modelValue:G.value,"onUpdate:modelValue":a[1]||(a[1]=e=>G.value=e),placeholder:"选择分类",clearable:""},{default:c(()=>[(g(!0),t(p,null,d(Q.value,e=>(g(),y(s,{key:e.id,label:e.name,value:e.slug},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),i(m,{modelValue:L.value,"onUpdate:modelValue":a[2]||(a[2]=e=>L.value=e),placeholder:"排序方式"},{default:c(()=>[i(s,{label:"最新发布",value:"latest"}),i(s,{label:"最多阅读",value:"views"}),i(s,{label:"最多点赞",value:"likes"})]),_:1},8,["modelValue"])])]),u((g(),t("div",E,[r("div",I,[(g(!0),t(p,null,d(O.value,e=>(g(),y(V,{key:e.id,article:e},null,8,["article"]))),128))]),R.value>0?(g(),t("div",J,[i(_,{"current-page":T.value,"onUpdate:currentPage":a[3]||(a[3]=e=>T.value=e),"page-size":Y.value,"onUpdate:pageSize":a[4]||(a[4]=e=>Y.value=e),total:R.value,"page-sizes":[12,24,48],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:X,onCurrentChange:Z},null,8,["current-page","page-size","total"])])):n("",!0),H.value||0!==O.value.length?n("",!0):(g(),t("div",K,[i(C,{description:"暂无文章"})]))])),[[x,H.value]])])])}}},[["__scopeId","data-v-66a3ceec"]]);export{S as default};
