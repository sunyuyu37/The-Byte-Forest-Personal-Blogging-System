import{X as e,r as l,c as s,a as r,D as a,K as t,J as o,Q as i,aj as c,M as n,O as d,aF as u,H as p,ae as v,I as f,al as m,aE as y,V as h,ay as g,o as w,P as x,a6 as b}from"./vue-B9wWIsxR.js";import{u as C}from"./index-di9GIa25.js";import{F as k}from"./ForestIcons-D1lm84fs.js";import{_ as E}from"./_plugin-vue_export-helper-BCo6x5W8.js";import{E as O}from"./element-plus-CXASJE3V.js";import"./utils-C28rWPR3.js";const _={class:"login-page"},B={class:"form-content"},M={class:"input-section"},L={class:"input-wrapper"},V={class:"input-icon"},j={key:0,class:"error-message"},F={class:"input-wrapper"},z={class:"input-icon"},H=["type"],q={key:0,class:"error-message"},I={class:"form-helpers"},Q={class:"remember-me"},R={class:"firefly-container"},U=["disabled"],T={key:0,class:"button-text forest-text"},X={key:1,class:"button-loading"},Z={class:"register-link"},D=E({__name:"Login",setup(E){const D=g(),G=C(),J=e({usernameOrEmail:"",password:"",rememberMe:!1}),K=e({usernameOrEmail:"",password:""}),P=l(!1),S=l(!1),Y=l(!1),A=l(!1),N=l(null),W=async()=>{var e,l;if((()=>{K.usernameOrEmail="",K.password="";let e=!0;return J.usernameOrEmail.trim()||(K.usernameOrEmail="请输入用户名或邮箱",e=!1),J.password.trim()?J.password.length<6&&(K.password="密码至少6位字符",e=!1):(K.password="请输入密码",e=!1),e})()){P.value=!0;try{const e=await G.login({usernameOrEmail:J.usernameOrEmail,password:J.password});if(200===e.code){O.success("登录成功！欢迎回到字节森林");const e=D.currentRoute.value.query.redirect||"/";D.push(e)}else O.error(e.message||"登录失败")}catch(s){(null==(l=null==(e=s.response)?void 0:e.data)?void 0:l.message)?O.error(s.response.data.message):s.message?O.error(s.message):O.error("登录失败，请检查网络连接")}finally{P.value=!1}}},$=e=>{const l=e.currentTarget,s=N.value,r=l.getBoundingClientRect(),a=Math.max(r.width,r.height),t=e.clientX-r.left-a/2,o=e.clientY-r.top-a/2;s&&(s.style.width=s.style.height=a+"px",s.style.left=t+"px",s.style.top=o+"px",s.classList.add("active"),setTimeout(()=>{s.classList.remove("active")},600))},ee=()=>{O.info("GitHub登录功能开发中...")},le=()=>{O.info("微信登录功能开发中...")},se=()=>{O.info("QQ登录功能开发中...")},re=()=>{O.info("手机登录功能开发中...")};return(e,l)=>{const g=m("router-link");return w(),s("div",_,[r("form",{onSubmit:h(W,["prevent"]),class:"login-form"},[r("div",B,[r("div",M,[r("div",{class:a(["input-group",{focused:Y.value,error:K.usernameOrEmail}])},[r("div",L,[r("div",V,[i(k,{name:"leaf",size:20,color:"#2E8B57"})]),o(r("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>J.usernameOrEmail=e),type:"text",placeholder:"用户名或邮箱",onFocus:l[1]||(l[1]=e=>Y.value=!0),onBlur:l[2]||(l[2]=e=>Y.value=!1),class:a({error:K.usernameOrEmail})},null,34),[[c,J.usernameOrEmail]]),l[8]||(l[8]=r("div",{class:"focus-line"},null,-1))]),K.usernameOrEmail?(w(),s("div",j,[l[9]||(l[9]=r("div",{class:"error-icon"},"⚠",-1)),n(" "+d(K.usernameOrEmail),1)])):t("",!0)],2),r("div",{class:a(["input-group",{focused:A.value,error:K.password}])},[r("div",F,[r("div",z,[i(k,{name:"tree-lock",size:20,color:"#2E8B57"})]),o(r("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>J.password=e),type:S.value?"text":"password",placeholder:"密码",onFocus:l[4]||(l[4]=e=>A.value=!0),onBlur:l[5]||(l[5]=e=>A.value=!1),class:a({error:K.password})},null,42,H),[[u,J.password]]),r("button",{type:"button",class:"password-toggle",onClick:l[6]||(l[6]=e=>S.value=!S.value)},[S.value?(w(),p(k,{key:1,name:"forest",size:20,color:"#2E8B57"})):(w(),p(k,{key:0,name:"sapling",size:20,color:"#2E8B57"}))]),l[10]||(l[10]=r("div",{class:"focus-line"},null,-1))]),K.password?(w(),s("div",q,[l[11]||(l[11]=r("div",{class:"error-icon"},"⚠",-1)),n(" "+d(K.password),1)])):t("",!0)],2)]),r("div",I,[r("label",Q,[o(r("input",{type:"checkbox","onUpdate:modelValue":l[7]||(l[7]=e=>J.rememberMe=e)},null,512),[[v,J.rememberMe]]),l[12]||(l[12]=r("span",{class:"custom-checkbox"},null,-1)),l[13]||(l[13]=r("span",{class:"remember-text"},"记住我",-1))]),i(g,{to:"/auth/forgot-password",class:"forgot-password"},{default:f(()=>[l[14]||(l[14]=n(" 迷雾中迷路？ ",-1)),r("div",R,[(w(),s(x,null,b(3,e=>r("div",{class:"firefly",key:e})),64))])]),_:1,__:[14]})]),r("button",{type:"submit",class:a(["login-button",{loading:P.value}]),disabled:P.value,onClick:$},[P.value?(w(),s("div",X,l[15]||(l[15]=[r("div",{class:"vine-loader"},null,-1),r("span",null,"登录中...",-1)]))):(w(),s("span",T,"登录字节森林")),r("div",{class:"button-ripple",ref_key:"rippleRef",ref:N},null,512)],10,U),r("div",{class:"social-login"},[l[20]||(l[20]=r("div",{class:"divider"},[r("span",null,"或使用其他方式登录")],-1)),r("div",{class:"social-buttons"},[r("button",{type:"button",class:"social-button wechat",onClick:le},l[16]||(l[16]=[y('<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" data-v-dd419dc5><circle cx="10" cy="11" r="6" fill="currentColor" opacity="0.85" data-v-dd419dc5></circle><circle cx="8.5" cy="10" r="0.8" fill="#fff" data-v-dd419dc5></circle><circle cx="11.5" cy="10" r="0.8" fill="#fff" data-v-dd419dc5></circle><path d="M7 16 L8.2 14.5" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" data-v-dd419dc5></path><circle cx="16" cy="13" r="4.2" fill="currentColor" opacity="0.9" data-v-dd419dc5></circle><circle cx="15" cy="12.5" r="0.7" fill="#fff" data-v-dd419dc5></circle><circle cx="17" cy="12.5" r="0.7" fill="#fff" data-v-dd419dc5></circle><path d="M14.2 16.6 L15 15.4" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" data-v-dd419dc5></path></svg>',1)])),r("button",{type:"button",class:"social-button qq",onClick:se},l[17]||(l[17]=[y('<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" data-v-dd419dc5><circle cx="12" cy="7.5" r="3.2" fill="currentColor" data-v-dd419dc5></circle><ellipse cx="12" cy="13.5" rx="5" ry="4.8" fill="currentColor" data-v-dd419dc5></ellipse><ellipse cx="9.2" cy="13.2" rx="1.2" ry="2" fill="currentColor" opacity="0.8" data-v-dd419dc5></ellipse><ellipse cx="14.8" cy="13.2" rx="1.2" ry="2" fill="currentColor" opacity="0.8" data-v-dd419dc5></ellipse><ellipse cx="10.5" cy="18" rx="1.6" ry="0.8" fill="#fff" opacity="0.9" data-v-dd419dc5></ellipse><ellipse cx="13.5" cy="18" rx="1.6" ry="0.8" fill="#fff" opacity="0.9" data-v-dd419dc5></ellipse></svg>',1)])),r("button",{type:"button",class:"social-button phone",onClick:re},l[18]||(l[18]=[r("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},[r("path",{d:"M17 2H7C5.895 2 5 2.895 5 4V20C5 21.105 5.895 22 7 22H17C18.105 22 19 21.105 19 20V4C19 2.895 18.105 2 17 2Z",stroke:"currentColor","stroke-width":"1.6"}),r("rect",{x:"9",y:"4.8",width:"6",height:"0.8",fill:"currentColor"}),r("circle",{cx:"12",cy:"19",r:"0.9",fill:"currentColor"})],-1)])),r("button",{type:"button",class:"social-button github",onClick:ee},l[19]||(l[19]=[r("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor"},[r("circle",{cx:"12",cy:"12",r:"9",fill:"currentColor",opacity:"0.15"}),r("path",{d:"M8.5 10 C8.5 7.8 10.2 6 12 6 C13.8 6 15.5 7.8 15.5 10 V12.2 C16.3 12.9 16.8 14 16.8 15.2 C16.8 17.4 14.8 18.5 12 18.5 C9.2 18.5 7.2 17.4 7.2 15.2 C7.2 14 7.7 12.9 8.5 12.2 V10 Z",fill:"currentColor"}),r("path",{d:"M10 7 L11.5 5.8 L12 6.4 L12.5 5.8 L14 7",stroke:"currentColor","stroke-width":"1.2",fill:"none","stroke-linecap":"round"})],-1)]))])]),r("div",Z,[l[22]||(l[22]=r("span",null,"还没有账户？",-1)),i(g,{to:"/auth/register",class:"register-vine"},{default:f(()=>l[21]||(l[21]=[n(" 加入森林 ",-1),r("div",{class:"vine-growth"},null,-1)])),_:1,__:[21]})])])],32)])}}},[["__scopeId","data-v-dd419dc5"]]);export{D as default};
